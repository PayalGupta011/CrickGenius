<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrickGenius - AI Cricket Analytics Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fo<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrickGenius - AI Cricket Analytics Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <script>
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>

    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-cricket"></i>
                <span>CrickGenius</span>
            </a>

            <div class="hamburger" onclick="document.querySelector('.nav-links').classList.toggle('active')">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <nav class="nav-links">
                <a href="#prediction" onclick="document.querySelector('.nav-links').classList.remove('active')">Match
                    Prediction</a>
                <a href="#analyzer" onclick="document.querySelector('.nav-links').classList.remove('active')">Player
                    Analysis</a>
                <a href="#fantasy" onclick="document.querySelector('.nav-links').classList.remove('active')">Fantasy
                    Team</a>
                <a href="#simulator" onclick="document.querySelector('.nav-links').classList.remove('active')">Live
                    Simulator</a>
                <a href="merchandise.html">Merchandise</a>
                <a href="cart.html" class="nav-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
                <a href="profile.html" class="nav-icon">
                    <i class="fas fa-user-circle"></i>
                </a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-text">
                <h1>AI-Powered Cricket <br> <span style="color: var(--primary);">Analytics Platform</span></h1>
                <p style="font-size: 1.1rem; margin: 20px 0 30px;">
                    Experience the future of cricket with advanced match predictions, AI-driven player analysis,
                    and smart fantasy team generation. Dominate your fantasy leagues with data-backed insights.
                </p>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <a href="#prediction" class="btn btn-primary">
                        <i class="fas fa-chart-line"></i> Start Analysis
                    </a>
                    <a href="#fantasy" class="btn btn-secondary">
                        <i class="fas fa-users"></i> Fantasy Team
                    </a>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://t4.ftcdn.net/jpg/06/15/06/81/360_F_615068142_3siXSo1TWv7ebrf7OR0XdHurjzkcpJE3.jpg"
                    alt="Cricket Analytics Dashboard">
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Features Showcase -->
        <div class="features-grid">
            <div class="feature-card reveal">
                <i class="fas fa-trophy feature-icon"></i>
                <h3>Win Probability</h3>
                <p>Real-time win probability engine that adjusts with every ball, wicket, and boundary.</p>
            </div>
            <div class="feature-card reveal">
                <i class="fas fa-chart-pie feature-icon"></i>
                <h3>Player Stats</h3>
                <p>Deep dive into batting and bowling metrics with historical data comparisons.</p>
            </div>
            <div class="feature-card reveal">
                <i class="fas fa-chess-knight feature-icon"></i>
                <h3>Strategy AI</h3>
                <p>Tactical suggestions for field placements and bowling changes based on batters.</p>
            </div>
        </div>

        <div class="main-content">
            <!-- Feature 1: Match Prediction System -->
            <section id="prediction" class="reveal">
                <div class="glass glass-card">
                    <div class="card-header">
                        <h2 class="card-title">Match Prediction System</h2>
                        <i class="fas fa-robot card-icon" style="font-size: 1.5rem; color: var(--accent);"></i>
                    </div>
                    <p style="margin-bottom: 20px;">Select teams and match conditions to get AI-powered match
                        predictions with detailed analysis.</p>

                    <div class="prediction-form">
                        <div class="form-group">
                            <label for="teamA">Team A</label>
                            <select id="teamA">
                                <option value="India">India</option>
                                <option value="Australia">Australia</option>
                                <option value="England">England</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="South Africa">South Africa</option>
                                <option value="West Indies">West Indies</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="teamB">Team B</label>
                            <select id="teamB">
                                <option value="Australia">Australia</option>
                                <option value="India">India</option>
                                <option value="England">England</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="South Africa">South Africa</option>
                                <option value="West Indies">West Indies</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="pitch">Pitch Condition</label>
                            <select id="pitch">
                                <option value="Hard">Hard & Bouncy</option>
                                <option value="Dry">Dry & Dusty</option>
                                <option value="Green">Green & Seaming</option>
                                <option value="Flat">Flat & Batting-friendly</option>
                                <option value="Slow">Slow & Turning</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="venue">Venue Advantage</label>
                            <select id="venue">
                                <option value="Neutral">Neutral Venue</option>
                                <option value="TeamA">Team A Home</option>
                                <option value="TeamB">Team B Home</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="format">Match Format</label>
                            <select id="format">
                                <option value="T20">T20 International</option>
                                <option value="ODI">One Day International</option>
                                <option value="Test">Test Match</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="toss">Toss Winner</label>
                            <select id="toss">
                                <option value="TeamA">Team A</option>
                                <option value="TeamB">Team B</option>
                                <option value="Random">Random (AI will predict)</option>
                            </select>
                        </div>

                        <button id="predictBtn" class="btn btn-primary btn-block"
                            style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-brain"></i> Predict Winner
                        </button>
                    </div>

                    <div id="predictionResult" class="prediction-result">
                        <div class="spinner" id="predictionSpinner"></div>
                        <div id="predictionContent" style="display: none;">
                            <div class="result-header">
                                <div>
                                    <h3>Predicted Winner</h3>
                                    <div id="winner" class="winner">India</div>
                                </div>
                                <div id="probability" class="probability">68%</div>
                            </div>

                            <div
                                style="display: flex; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; gap: 20px;">
                                <div>
                                    <div id="teamAProb" style="font-size: 1.2rem; font-weight: 600;">Team A: 68%</div>
                                    <div
                                        style="height: 10px; width: 200px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 5px; overflow: hidden;">
                                        <div id="teamABar"
                                            style="height: 100%; background: var(--success); width: 68%;"></div>
                                    </div>
                                </div>
                                <div>
                                    <div id="teamBProb" style="font-size: 1.2rem; font-weight: 600;">Team B: 32%</div>
                                    <div
                                        style="height: 10px; width: 200px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 5px; overflow: hidden;">
                                        <div id="teamBBar" style="height: 100%; background: var(--accent); width: 32%;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Key Factors -->
                            <div class="key-factors">
                                <h4>Key Factors Influencing Prediction</h4>
                                <div class="factors-grid" id="keyFactors">
                                    <!-- Factors will be added dynamically -->
                                </div>
                            </div>

                            <!-- Feature 4: Performance Graph -->
                            <div class="graph-container">
                                <canvas id="probabilityChart"></canvas>
                            </div>

                            <div style="margin-top: 20px; display: flex; gap: 15px;">
                                <button id="detailedAnalysisBtn" class="btn btn-secondary">
                                    <i class="fas fa-chart-bar"></i> Detailed Analysis
                                </button>
                                <button id="sharePredictionBtn" class="btn btn-primary">
                                    <i class="fas fa-share"></i> Share Prediction
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feature 2: Player Performance Analyzer -->
            <section id="analyzer" class="reveal mt-20">
                <div class="glass glass-card">
                    <div class="card-header">
                        <h2 class="card-title">Player Performance Analyzer</h2>
                        <i class="fas fa-chart-line card-icon" style="font-size: 1.5rem; color: var(--success);"></i>
                    </div>
                    <p style="margin-bottom: 20px;">Select a player to analyze their performance metrics, current form,
                        and suitability for upcoming matches.</p>

                    <div class="player-selector">
                        <select id="playerSelect"
                            style="flex: 1; padding: 12px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                            <option value="virat" style="color: black;">Virat Kohli</option>
                            <option value="smith" style="color: black;">Steve Smith</option>
                            <option value="williamson" style="color: black;">Kane Williamson</option>
                            <option value="root" style="color: black;">Joe Root</option>
                            <option value="babar" style="color: black;">Babar Azam</option>
                            <option value="warner" style="color: black;">David Warner</option>
                        </select>
                        <button id="analyzeBtn" class="btn btn-primary">
                            <i class="fas fa-search"></i> Analyze
                        </button>
                    </div>

                    <div id="playerAnalysis" class="player-card" style="display: none;">
                        <div class="player-img-container">
                            <img id="playerImage" src="https://via.placeholder.com/200x250/3a86ff/ffffff?text=Player"
                                alt="Player">
                        </div>
                        <div>
                            <h3 id="playerName" style="margin-bottom: 10px; font-size: 1.8rem;">Player Name</h3>
                            <div id="playerRole"
                                style="opacity: 0.8; margin-bottom: 15px; font-size: 1.1rem; color: var(--accent);">
                                Batsman</div>
                            <div id="playerForm" style="margin-bottom: 15px;">
                                <span style="font-weight: 600;">Current Form:</span>
                                <span id="formValue" style="color: var(--success);">Excellent</span>
                                <div
                                    style="height: 8px; width: 100%; background: #495057; border-radius: 4px; margin-top: 5px; overflow: hidden;">
                                    <div id="formBar" style="height: 100%; background: var(--success); width: 85%;">
                                    </div>
                                </div>
                            </div>

                            <div class="player-stats"
                                style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="formScore" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">8.5</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Form Score</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="strikePower" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">145</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Strike Power</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="consistency" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">85%</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Consistency</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="pressureHandling" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">8.2</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Pressure Handling
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="playerDetails" style="margin-top: 25px; display: none;">
                        <h4 style="margin-bottom: 15px;">Performance Analysis</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div
                                style="background: rgba(56, 176, 0, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--success);">
                                <h5 style="color: var(--success); margin-bottom: 10px;">Strengths</h5>
                                <ul id="strengthsList" style="padding-left: 20px;">
                                    <li>Excellent against pace bowling</li>
                                    <li>Strong in chasing situations</li>
                                    <li>High consistency in home conditions</li>
                                </ul>
                            </div>
                            <div
                                style="background: rgba(230, 57, 70, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--danger);">
                                <h5 style="color: var(--danger); margin-bottom: 10px;">Weaknesses</h5>
                                <ul id="weaknessesList" style="padding-left: 20px;">
                                    <li>Vulnerable against left-arm spin</li>
                                    <li>Lower average in away matches</li>
                                    <li>Struggles in swinging conditions</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Performance Trends Graph -->
                        <div style="margin-top: 25px;">
                            <h5 style="margin-bottom: 15px;">Performance Trends (Last 10 Matches)</h5>
                            <div class="graph-container">
                                <canvas id="playerTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Feature 3: Fantasy Team Generator -->
        <section id="fantasy" class="reveal mt-20">
            <div class="glass glass-card">
                <div class="card-header">
                    <h2 class="card-title">Fantasy Team Generator</h2>
                    <i class="fas fa-users card-icon" style="font-size: 1.5rem; color: var(--accent);"></i>
                </div>
                <p style="margin-bottom: 25px;">Generate a balanced fantasy team with AI-powered selection based on
                    current form, pitch conditions, and player matchups.</p>

                <div class="team-generator">
                    <div class="grid-form">
                        <div class="form-group">
                            <label for="fantasyFormat">Match Format</label>
                            <select id="fantasyFormat">
                                <option value="T20">T20</option>
                                <option value="ODI">ODI</option>
                                <option value="Test">Test</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fantasyBudget">Budget (in Cr)</label>
                            <select id="fantasyBudget">
                                <option value="100">100 Crores</option>
                                <option value="90">90 Crores</option>
                                <option value="80">80 Crores</option>
                            </select>
                        </div>
                    </div>

                    <button id="generateTeamBtn" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
                        <i class="fas fa-magic"></i> Generate Best Playing XI
                    </button>

                    <div class="spinner" id="teamSpinner" style="display: none;"></div>

                    <div id="teamContainer" class="team-container" style="display: none;">
                        <!-- Team will be generated here -->
                    </div>

                    <div class="team-categories" id="teamCategories"
                        style="display: none; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; text-align: center;">
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="batsmenCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--success);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Batsmen</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="allroundersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--warning);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">All-rounders</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="bowlersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--accent);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Bowlers</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="wicketkeepersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Wicketkeepers</div>
                        </div>
                    </div>

                    <div style="margin-top: 25px; text-align: center;">
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <div
                                style="background: rgba(40, 167, 69, 0.2); color: #28a745; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(40, 167, 69, 0.3);">
                                <i class="fas fa-check-circle"></i> Balanced Team
                            </div>
                            <div
                                style="background: rgba(23, 162, 184, 0.2); color: #17a2b8; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(23, 162, 184, 0.3);">
                                <i class="fas fa-brain"></i> AI Selection
                            </div>
                            <div
                                style="background: rgba(255, 193, 7, 0.2); color: #ffc107; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(255, 193, 7, 0.3);">
                                <i class="fas fa-coins"></i> Budget Optimized
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <br>

        <!-- Feature 5: Live Score Simulator -->
        <section id="simulator" class="card reveal">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Live Score Simulator</h2>
                    <i class="fas fa-broadcast-tower card-icon"></i>
                </div>
                <p style="margin-bottom: 20px;">Experience real-time cricket simulation with ball-by-ball updates,
                    realistic gameplay, and AI-generated commentary.</p>

                <div class="simulator-controls">
                    <button id="startSimulation" class="btn btn-primary">
                        <i class="fas fa-play"></i> Start Simulation
                    </button>
                    <button id="pauseSimulation" class="btn btn-secondary" disabled>
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button id="nextBall" class="btn btn-primary" disabled>
                        <i class="fas fa-forward"></i> Next Ball
                    </button>
                    <button id="resetSimulation" class="btn">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <label>Speed:</label>
                        <select id="simulationSpeed">
                            <option value="1000">Slow</option>
                            <option value="500" selected>Normal</option>
                            <option value="200">Fast</option>
                            <option value="0">Instant</option>
                        </select>
                    </div>
                </div>

                <div id="scoreDisplay" class="score-display" style="display: none;">
                    <div class="score-header">
                        <div>
                            <div style="font-size: 1.2rem; opacity: 0.8;" id="matchTitle">IND vs AUS - T20 Match</div>
                            <div id="currentScore" class="current-score">0/0 (0.0)</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.2rem; opacity: 0.8;">Target: <span id="targetScore">180</span>
                            </div>
                            <div id="requiredRunRate" style="font-size: 1.5rem; font-weight: 700;">RR: 9.00</div>
                        </div>
                    </div>

                    <div class="over-progress">
                        <div id="overProgressFill" class="over-progress-fill"></div>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 15px; flex-wrap: wrap; gap: 15px;">
                        <div>
                            <div style="opacity: 0.8;">Batsmen</div>
                            <div id="batsman1" style="font-weight: 600;">R. Sharma: 0(0)</div>
                            <div id="batsman2" style="font-weight: 600;">V. Kohli: 0(0)</div>
                        </div>
                        <div>
                            <div style="opacity: 0.8;">Partnership</div>
                            <div id="partnership" style="font-weight: 600;">0 runs, 0 balls</div>
                            <div id="currentRunRate" style="font-size: 0.9rem;">CRR: 0.00</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="opacity: 0.8;">Bowler</div>
                            <div id="bowler" style="font-weight: 600;">P. Cummins: 0-0-0-0</div>
                            <div id="bowlerEconomy" style="font-size: 0.9rem;">Econ: 0.00</div>
                        </div>
                    </div>

                    <div
                        style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div id="commentary" style="font-style: italic;">Match about to begin...</div>
                    </div>

                    <h4 style="margin-bottom: 10px;">Ball-by-Ball Commentary</h4>
                    <div id="ballByBall" class="ball-by-ball">
                        <!-- Ball events will appear here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="how-it-works reveal">
            <div class="container">
                <h2 style="text-align: center; margin-bottom: 20px; font-size: 2.5rem;">How CrickGenius Works</h2>
                <p
                    style="text-align: center; margin-bottom: 40px; max-width: 800px; margin-left: auto; margin-right: auto; opacity: 0.9;">
                    Our platform uses a combination of statistical analysis, machine learning algorithms, and real-time
                    data to deliver accurate predictions and insights.
                </p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Data Collection</h3>
                        <p>We gather real-time player statistics, pitch reports, weather conditions, and historical
                            match data.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>AI Analysis</h3>
                        <p>Our algorithms process the data to identify patterns, player form, and match conditions.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Prediction Models</h3>
                        <p>We apply multiple prediction models to forecast match outcomes and player performance.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <h3>Results & Insights</h3>
                        <p>You receive easy-to-understand predictions, visualizations, and actionable insights.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container reveal">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>CrickGenius</h3>
                    <p>AI-powered cricket analytics platform with advanced prediction algorithms and performance
                        analysis.</p>
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <i class="fab fa-js-square" style="font-size: 2rem; color: var(--accent);"></i>
                        <i class="fab fa-html5" style="font-size: 2rem; color: var(--warning);"></i>
                        <i class="fab fa-css3-alt" style="font-size: 2rem; color: var(--primary);"></i>
                        <i class="fas fa-chart-line" style="font-size: 2rem; color: var(--success);"></i>
                    </div>
                </div>

                <div class="footer-section">
                    <h3>Features</h3>
                    <ul style="list-style: none;">
                        <li>âœ“ AI Match Prediction</li>
                        <li>âœ“ Player Performance Analysis</li>
                        <li>âœ“ Fantasy Team Generator</li>
                        <li>âœ“ Live Score Simulation</li>
                        <li>âœ“ Data Visualization</li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>AI Logic Implementation</h3>
                    <p>Rule-based AI algorithms using JavaScript for:</p>
                    <ul style="list-style: none;">
                        <li>â€¢ Pitch type impact analysis</li>
                        <li>â€¢ Player form evaluation</li>
                        <li>â€¢ Probability calculations</li>
                        <li>â€¢ Dynamic team generation</li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                &copy; 2026 CrickGenius. All rights reserved. | The Times of India
            </div>
        </div>
    </footer>

    <script>
        // Player data for analyzer
        const playerData = {
            virat: {
                name: "Virat Kohli",
                role: "Top-order Batsman",
                form: "Excellent",
                formScore: 8.7,
                strikePower: 138,
                consistency: "92%",
                pressureHandling: 9.1,
                strengths: [
                    "Excellent against pace bowling",
                    "Strong in chasing situations",
                    "High consistency in home conditions"
                ],
                weaknesses: [
                    "Vulnerable against left-arm spin",
                    "Struggles in swinging conditions"
                ],
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Virat_Kohli_in_PMO_New_Delhi.jpg/500px-Virat_Kohli_in_PMO_New_Delhi.jpg"
            }

            ,
            smith: {
                name: "Steve Smith",
                role: "Middle-order Batsman",
                form: "Very Good",
                formScore: 8.2,
                strikePower: 125,
                consistency: "89%",
                pressureHandling: 8.8,
                strengths: ["Unorthodox but effective technique", "Excellent in Test matches", "Strong against spin bowling", "Great concentration"],
                weaknesses: ["Lower strike rate in T20s", "Can struggle against in-swingers", "Limited range of shots"],
                image: "https://circleofcricket.com/post_image/post_image_70586f0.jpg"
            },
            williamson: {
                name: "Kane Williamson",
                role: "Top-order Batsman (Captain)",
                form: "Good",
                formScore: 7.9,
                strikePower: 122,
                consistency: "91%",
                pressureHandling: 8.5,
                strengths: ["Excellent technique and temperament", "Great leadership skills", "Strong in all formats", "Adaptable to conditions"],
                weaknesses: ["Not a power hitter", "Can be slow in T20s", "Struggles against extreme pace"],
                image: "https://scontent.frpr5-1.fna.fbcdn.net/v/t1.6435-9/89002361_3735408589832459_6012288395684872192_n.jpg?_nc_cat=1&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=zt4lNZ2Yl_8Q7kNvwHRFKtv&_nc_oc=AdkzF0wZbBe0P5yX_TJube0Q5bnHYxMcEtzOfevYVkjrgqgGaP3IErU-6t1bXgfOLRNG30WMa5gLg5VJFa2TZMrR&_nc_zt=23&_nc_ht=scontent.frpr5-1.fna&_nc_gid=EuAsewwTqkDNYsPPZ39zLg&oh=00_Afqgh2u_Mkji601X3INq_Yeo17UTjO6UeTzAAA-C5swEGg&oe=6995F09A"
            },
            root: {
                name: "Joe Root",
                role: "Middle-order Batsman",
                form: "Good",
                formScore: 7.8,
                strikePower: 120,
                consistency: "88%",
                pressureHandling: 8.3,
                strengths: ["Classical batsman with solid technique", "Excellent in English conditions", "Good against pace bowling", "Consistent performer"],
                weaknesses: ["Not a big hitter", "Can struggle against quality spin", "Lower strike rate in limited overs"],
                image: "https://www.asksportsinfo.com/wp-content/uploads/1990/12/Joe-Root-England-Cricketer.webp"
            },
            babar: {
                name: "Babar Azam",
                role: "Top-order Batsman",
                form: "Excellent",
                formScore: 8.6,
                strikePower: 130,
                consistency: "90%",
                pressureHandling: 8.4,
                strengths: ["Elegant stroke player", "Consistent across formats", "Good against both pace and spin", "Excellent timer of the ball"],
                weaknesses: ["Can struggle against extreme bounce", "Sometimes slow between wickets", "Limited experience in tough away conditions"],
                image: "https://scontent.frpr5-1.fna.fbcdn.net/v/t39.30808-1/347548743_279026471339257_7532264635443883593_n.jpg?stp=dst-jpg_s200x200_tt6&_nc_cat=102&ccb=1-7&_nc_sid=2d3e12&_nc_ohc=QOpYRVsV-FsQ7kNvwGWNbaU&_nc_oc=AdkXugSwIkDdY-Hn0MYdvG1_cZzmvLyGUedu9ITtMPJ6VlF3AANOliIXLqMebXsihnDrUPDFDhKSTaY2tvfeyDh9&_nc_zt=24&_nc_ht=scontent.frpr5-1.fna&_nc_gid=EuTxAqSFTIlsEOtFxylQ3A&oh=00_Afpqc2XofaEUho6kbObtg19lDYEu5ZyXkPKSW-eEpj_5gg&oe=69745306"
            },
            warner: {
                name: "David Warner",
                role: "Opening Batsman",
                form: "Very Good",
                formScore: 8.1,
                strikePower: 145,
                consistency: "85%",
                pressureHandling: 8.0,
                strengths: ["Aggressive stroke player", "Excellent in powerplays", "Great fielder", "Experience in all conditions"],
                weaknesses: ["Can be vulnerable against swing early", "Struggles against spin at times", "Inconsistent in longer formats"],
                image: "https://cdn.pixabay.com/photo/2024/04/11/05/29/david-warner-8689228_1280.jpg"
            }
        };

        // Team data for fantasy generator
        const fantasyPlayers = {
            T20: [
                { name: "Virat Kohli", role: "Batsman", price: 10.5, form: 8.7 },
                { name: "Rohit Sharma", role: "Batsman", price: 10.0, form: 8.4 },
                { name: "Jasprit Bumrah", role: "Bowler", price: 9.5, form: 8.8 },
                { name: "Glenn Maxwell", role: "All-rounder", price: 9.0, form: 8.2 },
                { name: "Ben Stokes", role: "All-rounder", price: 9.5, form: 8.5 },
                { name: "Kagiso Rabada", role: "Bowler", price: 9.0, form: 8.3 },
                { name: "Jos Buttler", role: "Wicketkeeper", price: 10.0, form: 8.3 },
                { name: "Rashid Khan", role: "Bowler", price: 9.5, form: 9.0 },
                { name: "Kane Williamson", role: "Batsman", price: 9.0, form: 7.9 },
                { name: "Trent Boult", role: "Bowler", price: 8.5, form: 8.1 },
                { name: "AB de Villiers", role: "Batsman", price: 9.5, form: 8.6 },
                { name: "Sunil Narine", role: "All-rounder", price: 8.5, form: 7.8 },
                { name: "MS Dhoni", role: "Wicketkeeper", price: 9.0, form: 8.0 },
                { name: "Pat Cummins", role: "Bowler", price: 9.0, form: 8.4 },
                { name: "Steve Smith", role: "Batsman", price: 9.5, form: 8.2 },
                { name: "Hardik Pandya", role: "All-rounder", price: 9.0, form: 8.1 },
                { name: "David Warner", role: "Batsman", price: 10.0, form: 8.1 },
                { name: "Shaheen Afridi", role: "Bowler", price: 8.5, form: 8.2 },
                { name: "Quinton de Kock", role: "Wicketkeeper", price: 8.5, form: 8.0 },
                { name: "Andre Russell", role: "All-rounder", price: 9.0, form: 8.3 }
            ]
        };

        const revealElements = document.querySelectorAll('.reveal');

        const revealOnScroll = () => {
            const windowHeight = window.innerHeight;
            const revealPoint = 100;

            revealElements.forEach(el => {
                const elementTop = el.getBoundingClientRect().top;

                if (elementTop < windowHeight - revealPoint) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active'); // ðŸ” reset animation
                }
            });
        };

        window.addEventListener('scroll', revealOnScroll);
        window.addEventListener('load', revealOnScroll);



        // Match prediction AI logic
        document.getElementById('predictBtn').addEventListener('click', function () {
            const teamA = document.getElementById('teamA').value;
            const teamB = document.getElementById('teamB').value;
            const pitch = document.getElementById('pitch').value;
            const venue = document.getElementById('venue').value;
            const format = document.getElementById('format').value;
            const toss = document.getElementById('toss').value;

            // Show loading spinner
            document.getElementById('predictionSpinner').style.display = 'block';
            document.getElementById('predictionContent').style.display = 'none';
            document.getElementById('predictionResult').style.display = 'block';

            // Simulate AI processing delay
            setTimeout(function () {
                // AI Logic: Calculate winning probabilities based on conditions

                // Team strength factors (based on ICC rankings and recent form)
                const teamStrength = {
                    "India": { T20: 85, ODI: 87, Test: 88 },
                    "Australia": { T20: 82, ODI: 85, Test: 86 },
                    "England": { T20: 84, ODI: 86, Test: 85 },
                    "Pakistan": { T20: 83, ODI: 80, Test: 79 },
                    "New Zealand": { T20: 81, ODI: 83, Test: 84 },
                    "South Africa": { T20: 79, ODI: 81, Test: 82 },
                    "West Indies": { T20: 80, ODI: 76, Test: 72 },
                    "Sri Lanka": { T20: 77, ODI: 78, Test: 76 }
                };

                // Pitch impact factors
                const pitchImpact = {
                    "Hard": { batting: 1.2, bowling: 0.9, spin: 0.8, pace: 1.3 },
                    "Dry": { batting: 0.9, bowling: 1.3, spin: 1.4, pace: 0.9 },
                    "Green": { batting: 0.8, bowling: 1.4, spin: 0.7, pace: 1.5 },
                    "Flat": { batting: 1.3, bowling: 0.8, spin: 0.8, pace: 0.9 },
                    "Slow": { batting: 0.9, bowling: 1.2, spin: 1.3, pace: 0.8 }
                };

                // Venue impact
                const venueImpact = {
                    "Neutral": 0,
                    "TeamA": 8,
                    "TeamB": -8
                };

                // Format impact
                const formatImpact = {
                    "T20": { variance: 1.3 },
                    "ODI": { variance: 1.1 },
                    "Test": { variance: 1.0 }
                };

                // Calculate team A probability
                let teamAProbability = teamStrength[teamA][format];
                let teamBProbability = teamStrength[teamB][format];

                // Apply pitch impact
                const pitchFactor = pitchImpact[pitch];
                teamAProbability *= (pitchFactor.batting + pitchFactor.bowling) / 2;
                teamBProbability *= (pitchFactor.batting + pitchFactor.bowling) / 2;

                // Apply venue impact
                if (venue === "TeamA") {
                    teamAProbability += venueImpact[venue];
                } else if (venue === "TeamB") {
                    teamBProbability += venueImpact[venue];
                }

                // Apply toss impact
                let tossImpact = 0;
                if (toss === "TeamA") {
                    tossImpact = 3;
                    teamAProbability += tossImpact;
                } else if (toss === "TeamB") {
                    tossImpact = 3;
                    teamBProbability += tossImpact;
                } else {
                    // Random toss - add some randomness
                    const randomToss = Math.random() > 0.5 ? teamA : teamB;
                    if (randomToss === teamA) {
                        teamAProbability += 3;
                    } else {
                        teamBProbability += 3;
                    }
                }

                // Add some randomness based on format
                const randomFactor = (Math.random() * 10 - 5) * formatImpact[format].variance;
                teamAProbability += randomFactor;
                teamBProbability -= randomFactor;

                // Ensure probabilities are within reasonable bounds
                teamAProbability = Math.max(30, Math.min(95, teamAProbability));
                teamBProbability = Math.max(30, Math.min(95, teamBProbability));

                // Normalize to get probabilities
                const total = teamAProbability + teamBProbability;
                const teamAFinal = Math.round((teamAProbability / total) * 100);
                const teamBFinal = 100 - teamAFinal;

                // Determine winner
                const winner = teamAFinal > teamBFinal ? teamA : teamB;

                // Display results
                document.getElementById('winner').textContent = winner;
                document.getElementById('probability').textContent = Math.max(teamAFinal, teamBFinal) + "%";
                document.getElementById('teamAProb').textContent = `${teamA}: ${teamAFinal}%`;
                document.getElementById('teamBProb').textContent = `${teamB}: ${teamBFinal}%`;
                document.getElementById('teamABar').style.width = `${teamAFinal}%`;
                document.getElementById('teamBBar').style.width = `${teamBFinal}%`;

                // Generate key factors
                generateKeyFactors(teamA, teamB, teamAFinal, teamBFinal, pitch, venue, format, toss);

                // Update the chart
                updateProbabilityChart(teamA, teamB, teamAFinal, teamBFinal);

                // Hide spinner and show content
                document.getElementById('predictionSpinner').style.display = 'none';
                document.getElementById('predictionContent').style.display = 'block';

            }, 1500); // 1.5 second delay to simulate AI processing
        });

        // Feature 4: Probability Chart
        let probabilityChart = null;

        function updateProbabilityChart(teamA, teamB, probA, probB) {
            const ctx = document.getElementById('probabilityChart').getContext('2d');

            // Destroy existing chart if it exists
            if (probabilityChart) {
                probabilityChart.destroy();
            }

            // Create new chart
            probabilityChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [teamA, teamB],
                    datasets: [{
                        label: 'Win Probability %',
                        data: [probA, probB],
                        backgroundColor: [
                            'rgba(58, 134, 255, 0.8)',
                            'rgba(131, 56, 236, 0.8)'
                        ],
                        borderColor: [
                            'rgb(58, 134, 255)',
                            'rgb(131, 56, 236)'
                        ],
                        borderWidth: 2,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // Generate key factors for match prediction
        function generateKeyFactors(teamA, teamB, probA, probB, pitch, venue, format, toss) {
            const factorsGrid = document.getElementById('keyFactors');
            factorsGrid.innerHTML = '';

            const factors = [
                { name: 'Team Form', value: teamA, impact: '+12%', positive: probA > probB },
                { name: 'Pitch Conditions', value: pitch, impact: pitch === 'Flat' ? '+8%' : '+5%', positive: true },
                { name: 'Home Advantage', value: venue === 'TeamA' ? teamA : venue === 'TeamB' ? teamB : 'Neutral', impact: venue !== 'Neutral' ? '+6%' : '0%', positive: venue !== 'Neutral' },
                { name: 'Toss Impact', value: toss === 'Random' ? 'AI Predicted' : toss, impact: '+3%', positive: true },
                { name: 'Head-to-Head', value: 'Even', impact: '+2%', positive: true },
                { name: 'Player Availability', value: 'Full Squads', impact: '0%', positive: true }
            ];

            factors.forEach(factor => {
                const factorDiv = document.createElement('div');
                factorDiv.className = 'factor';

                factorDiv.innerHTML = `
                    <div class="factor-name">${factor.name}</div>
                    <div class="factor-value ${factor.positive ? '' : 'factor-negative'}">${factor.impact}</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">${factor.value}</div>
                `;

                factorsGrid.appendChild(factorDiv);
            });
        }

        // Feature 2: Player Performance Analyzer
        document.getElementById('analyzeBtn').addEventListener('click', function () {
            const playerId = document.getElementById('playerSelect').value;
            const player = playerData[playerId];

            // Show player card
            document.getElementById('playerAnalysis').style.display = 'grid';
            document.getElementById('playerDetails').style.display = 'block';

            // Update player info
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerRole').textContent = player.role;
            document.getElementById('formValue').textContent = player.form;
            document.getElementById('formScore').textContent = player.formScore;
            document.getElementById('strikePower').textContent = player.strikePower;
            document.getElementById('consistency').textContent = player.consistency;
            document.getElementById('pressureHandling').textContent = player.pressureHandling;

            // Update form bar
            const formPercent = (player.formScore / 10) * 100;
            document.getElementById('formBar').style.width = `${formPercent}%`;

            // Update player image
            document.getElementById('playerImage').src = player.image;

            // Update strengths and weaknesses
            const strengthsList = document.getElementById('strengthsList');
            strengthsList.innerHTML = '';
            player.strengths.forEach(strength => {
                const li = document.createElement('li');
                li.textContent = strength;
                strengthsList.appendChild(li);
            });

            const weaknessesList = document.getElementById('weaknessesList');
            weaknessesList.innerHTML = '';
            player.weaknesses.forEach(weakness => {
                const li = document.createElement('li');
                li.textContent = weakness;
                weaknessesList.appendChild(li);
            });


            // âœ… HAMBURGER MENU (GLOBAL)
            document.getElementById('hamburger')?.addEventListener('click', function () {
                document.querySelector('nav').classList.toggle('active');
            });

            // Close menu when clicking outside (mobile)
            document.addEventListener('click', function (e) {
                if (window.innerWidth <= 768) {
                    const nav = document.querySelector('nav');
                    const hamburger = document.getElementById('hamburger');

                    if (
                        nav.classList.contains('active') &&
                        !nav.contains(e.target) &&
                        !hamburger.contains(e.target)
                    ) {
                        nav.classList.remove('active');
                    }
                }
            });


            // Update player trends chart
            updatePlayerTrendsChart(player.name);
        });

        // Player trends chart
        let playerTrendsChart = null;

        function updatePlayerTrendsChart(playerName) {
            const ctx = document.getElementById('playerTrendsChart').getContext('2d');

            // Generate random performance data for last 10 matches
            const matches = ['Match 1', 'Match 2', 'Match 3', 'Match 4', 'Match 5', 'Match 6', 'Match 7', 'Match 8', 'Match 9', 'Match 10'];
            const scores = [];

            for (let i = 0; i < 10; i++) {
                // Generate somewhat realistic scores with some randomness
                const baseScore = Math.floor(Math.random() * 80) + 20;
                scores.push(baseScore);
            }

            // Destroy existing chart if it exists
            if (playerTrendsChart) {
                playerTrendsChart.destroy();
            }

            // Create new chart
            playerTrendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: matches,
                    datasets: [{
                        label: 'Runs Scored',
                        data: scores,
                        backgroundColor: 'rgba(58, 134, 255, 0.1)',
                        borderColor: 'rgb(58, 134, 255)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Runs'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Feature 3: Fantasy Team Generator
        document.getElementById('generateTeamBtn').addEventListener('click', function () {
            const format = document.getElementById('fantasyFormat').value;
            const budget = parseInt(document.getElementById('fantasyBudget').value);

            // Show loading spinner
            document.getElementById('teamSpinner').style.display = 'block';
            document.getElementById('teamContainer').style.display = 'none';
            document.getElementById('teamCategories').style.display = 'none';

            // Simulate AI processing delay
            setTimeout(function () {
                const teamContainer = document.getElementById('teamContainer');
                teamContainer.innerHTML = '';

                // AI Logic: Generate balanced team based on format and budget
                let availablePlayers = [...fantasyPlayers.T20]; // Uses T20 pool as base

                // Randomize players (Fisher-Yates Shuffle)
                for (let i = availablePlayers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [availablePlayers[i], availablePlayers[j]] = [availablePlayers[j], availablePlayers[i]];
                }

                // Define team composition for 11 players
                let composition;
                if (format === 'T20') {
                    composition = { batsmen: 4, allrounders: 3, bowlers: 3, wicketkeepers: 1 };
                } else if (format === 'ODI') {
                    composition = { batsmen: 5, allrounders: 2, bowlers: 3, wicketkeepers: 1 };
                } else { // Test
                    composition = { batsmen: 5, allrounders: 2, bowlers: 3, wicketkeepers: 1 };
                }

                // Select team with AI logic
                const selectedPlayers = [];
                let totalCost = 0;
                let batsmenCount = 0;
                let allroundersCount = 0;
                let bowlersCount = 0;
                let wicketkeepersCount = 0;

                // Helper function to get players by role
                const getPlayersByRole = (role) => {
                    return availablePlayers.filter(p => p.role === role);
                };

                // Select wicketkeeper
                const wicketkeepers = getPlayersByRole('Wicketkeeper');
                if (wicketkeepers.length > 0) {
                    const wk = wicketkeepers[0];
                    selectedPlayers.push(wk);
                    totalCost += wk.price;
                    wicketkeepersCount++;
                    availablePlayers = availablePlayers.filter(p => p.name !== wk.name);
                }

                // Select batsmen
                const batsmen = getPlayersByRole('Batsman');
                for (let i = 0; i < composition.batsmen && batsmen.length > i; i++) {
                    const batsman = batsmen[i];
                    if (totalCost + batsman.price <= budget) {
                        selectedPlayers.push(batsman);
                        totalCost += batsman.price;
                        batsmenCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== batsman.name);
                    }
                }

                // Select all-rounders
                const allrounders = getPlayersByRole('All-rounder');
                for (let i = 0; i < composition.allrounders && allrounders.length > i; i++) {
                    const allrounder = allrounders[i];
                    if (totalCost + allrounder.price <= budget) {
                        selectedPlayers.push(allrounder);
                        totalCost += allrounder.price;
                        allroundersCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== allrounder.name);
                    }
                }

                // Select bowlers
                const bowlers = getPlayersByRole('Bowler');
                for (let i = 0; i < composition.bowlers && bowlers.length > i; i++) {
                    const bowler = bowlers[i];
                    if (totalCost + bowler.price <= budget) {
                        selectedPlayers.push(bowler);
                        totalCost += bowler.price;
                        bowlersCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== bowler.name);
                    }
                }

                // Fill remaining spots if less than 11 (due to budget or random shuffle)
                // This logic is a simplified fallback
                while (selectedPlayers.length < 11 && availablePlayers.length > 0) {
                    const p = availablePlayers.pop();
                    if (totalCost + p.price <= budget + 5) { // allow slight buffer for fallback
                        selectedPlayers.push(p);
                        totalCost += p.price;
                        if (p.role === 'Batsman') batsmenCount++;
                        else if (p.role === 'Bowler') bowlersCount++;
                        else if (p.role === 'Wicketkeeper') wicketkeepersCount++;
                        else allroundersCount++;
                    }
                }

                // Display the team
                const teamList = document.createElement('div');
                teamList.className = 'team-list';

                selectedPlayers.forEach(player => {
                    let icon = 'fa-user';
                    if (player.role === 'Batsman') icon = 'fa-baseball-bat-ball';
                    if (player.role === 'Bowler') icon = 'fa-bowling-ball';
                    if (player.role === 'All-rounder') icon = 'fa-bolt';
                    if (player.role === 'Wicketkeeper') icon = 'fa-hands';

                    const playerItem = document.createElement('div');
                    playerItem.className = 'player-item';
                    playerItem.innerHTML = `
                        <div class="player-info">
                            <div class="player-role-icon">
                                <i class="fas ${icon}"></i>
                            </div>
                            <div>
                                <div class="player-name">${player.name}</div>
                                <div class="player-role-text">${player.role}</div>
                            </div>
                        </div>
                        <div class="player-price">${player.price} Cr</div>
                    `;
                    teamList.appendChild(playerItem);
                });

                teamContainer.innerHTML = '';
                teamContainer.appendChild(teamList);

                // Update category counts
                document.getElementById('batsmenCount').textContent = batsmenCount;
                document.getElementById('allroundersCount').textContent = allroundersCount;
                document.getElementById('bowlersCount').textContent = bowlersCount;
                document.getElementById('wicketkeepersCount').textContent = wicketkeepersCount;

                // Show the team container and categories
                document.getElementById('teamSpinner').style.display = 'none';
                teamContainer.style.display = 'block'; // Changed to block for new styling
                document.getElementById('teamCategories').style.display = 'grid'; // Grid for counts

                // Show summary
                const remainingBudget = (budget - totalCost).toFixed(1);
                const avgForm = (selectedPlayers.reduce((sum, p) => sum + p.form, 0) / selectedPlayers.length).toFixed(1);

                // Show a message about the team
                setTimeout(function () {
                    alert(`Fantasy Team Generated Successfully!\n\nTotal Players: ${selectedPlayers.length}\nTotal Cost: ${totalCost.toFixed(1)} Cr\nRemaining Budget: ${remainingBudget} Cr\nAverage Player Form: ${avgForm}/10\n\nThis team is optimized for ${format} format.`);
                }, 300);

            }, 1200); // 1.2 second delay to simulate AI processing
        });

        // Feature 5: Live Score Simulator
        let simulationInterval;
        let currentOver = 0;
        let currentBall = 0;
        let totalBalls = 0;
        let totalRuns = 0;
        let wickets = 0;
        let target = 180;
        let isSimulationRunning = false;
        let isPaused = false;
        let partnershipRuns = 0;
        let partnershipBalls = 0;
        let currentBowlerRuns = 0;
        let currentBowlerBalls = 0;
        let currentBowlerWickets = 0;

        const ballOutcomes = [
            { runs: 0, text: "Dot ball. Excellent line and length.", type: "dot" },
            { runs: 1, text: "Single taken. Good placement.", type: "single" },
            { runs: 2, text: "Two runs. Well run between the wickets.", type: "double" },
            { runs: 3, text: "Three runs. Excellent running.", type: "triple" },
            { runs: 4, text: "FOUR! Boundary hit with authority.", type: "boundary" },
            { runs: 6, text: "SIX! Massive hit into the stands!", type: "six" },
            { runs: 0, text: "WICKET! Clean bowled!", type: "wicket" },
            { runs: 0, text: "WIDE ball. Extra run conceded.", type: "wide" },
            { runs: 0, text: "No ball. Free hit coming up.", type: "noball" },
            { runs: 1, text: "Leg bye. They scramble for a single.", type: "legbye" }
        ];

        const commentaryTemplates = {
            dot: ["Excellent delivery!", "Good fielding saves runs.", "Beaten outside off stump.", "Defended solidly."],
            single: ["Quick single taken.", "Well placed into the gap.", "Good running between wickets.", "Pushed to deep field for a single."],
            boundary: ["Classic cover drive!", "Pulled away with power!", "Lovely timing on that shot!", "That raced to the boundary!"],
            six: ["That's gone miles!", "Monstrous hit!", "What a shot! That's out of here!", "Deposited into the stands!"],
            wicket: ["Bowled him! Timber!", "Caught! That's a big wicket!", "LBW! The finger goes up!", "Edged and taken!"]
        };

        document.getElementById('startSimulation').addEventListener('click', function () {
            if (isSimulationRunning) return;

            isSimulationRunning = true;
            isPaused = false;
            document.getElementById('startSimulation').disabled = true;
            document.getElementById('pauseSimulation').disabled = false;
            document.getElementById('nextBall').disabled = true;
            document.getElementById('scoreDisplay').style.display = 'block';

            // Set match title based on format
            const format = document.getElementById('fantasyFormat').value;
            document.getElementById('matchTitle').textContent = `IND vs AUS - ${format} Match`;

            // Start automatic simulation
            const speed = parseInt(document.getElementById('simulationSpeed').value);

            // If speed is 0 (instant), run all balls at once
            if (speed === 0) {
                simulateAllBalls();
            } else {
                simulationInterval = setInterval(simulateBall, speed);
            }
        });

        document.getElementById('pauseSimulation').addEventListener('click', function () {
            if (!isSimulationRunning) return;

            if (isPaused) {
                // Resume simulation
                isPaused = false;
                this.innerHTML = '<i class="fas fa-play"></i> Resume';
                const speed = parseInt(document.getElementById('simulationSpeed').value);
                simulationInterval = setInterval(simulateBall, speed);
            } else {
                // Pause simulation
                isPaused = true;
                this.innerHTML = '<i class="fas fa-play"></i> Resume';
                clearInterval(simulationInterval);
            }
        });

        document.getElementById('nextBall').addEventListener('click', simulateBall);

        document.getElementById('resetSimulation').addEventListener('click', function () {
            clearInterval(simulationInterval);
            isSimulationRunning = false;
            isPaused = false;
            currentOver = 0;
            currentBall = 0;
            totalBalls = 0;
            totalRuns = 0;
            wickets = 0;
            partnershipRuns = 0;
            partnershipBalls = 0;
            currentBowlerRuns = 0;
            currentBowlerBalls = 0;
            currentBowlerWickets = 0;

            document.getElementById('startSimulation').disabled = false;
            document.getElementById('pauseSimulation').disabled = true;
            document.getElementById('nextBall').disabled = true;
            document.getElementById('currentScore').textContent = "0/0 (0.0)";
            document.getElementById('overProgressFill').style.width = "0%";
            document.getElementById('ballByBall').innerHTML = "";
            document.getElementById('commentary').textContent = "Match about to begin...";
            document.getElementById('batsman1').textContent = "R. Sharma: 0(0)";
            document.getElementById('batsman2').textContent = "V. Kohli: 0(0)";
            document.getElementById('bowler').textContent = "P. Cummins: 0-0-0-0";
            document.getElementById('requiredRunRate').textContent = "RR: 9.00";
            document.getElementById('partnership').textContent = "0 runs, 0 balls";
            document.getElementById('currentRunRate').textContent = "CRR: 0.00";
            document.getElementById('bowlerEconomy').textContent = "Econ: 0.00";
            document.getElementById('pauseSimulation').innerHTML = '<i class="fas fa-pause"></i> Pause';
        });

        function simulateAllBalls() {
            // Simulate all remaining balls instantly
            const remainingBalls = 120 - totalBalls;
            const remainingWickets = 10 - wickets;

            for (let i = 0; i < remainingBalls && i < remainingWickets * 10; i++) {
                simulateBall();
            }

            // Mark simulation as complete
            isSimulationRunning = false;
            document.getElementById('startSimulation').disabled = false;
            document.getElementById('pauseSimulation').disabled = true;
        }

        function simulateBall() {
            if (totalBalls >= 120 || wickets >= 10) {
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;

                if (totalRuns >= target) {
                    document.getElementById('commentary').textContent = "Team wins! Target achieved with " + (120 - totalBalls) + " balls remaining!";
                } else if (wickets >= 10) {
                    document.getElementById('commentary').textContent = "All out! Innings complete.";
                } else {
                    document.getElementById('commentary').textContent = "Innings complete! Final score: " + totalRuns + "/" + wickets;
                }
                return;
            }

            // Increment ball
            totalBalls++;
            currentBall++;
            partnershipBalls++;
            currentBowlerBalls++;

            if (currentBall > 6) {
                currentOver++;
                currentBall = 1;
                // Change bowler after over
                currentBowlerRuns = 0;
                currentBowlerBalls = 0;
                currentBowlerWickets = 0;
            }

            // AI Logic: Determine ball outcome with probability rules
            let outcomeIndex;
            const random = Math.random();

            // More probability for dot balls and singles, less for boundaries and wickets
            // Adjust probabilities based on match situation
            let dotProb = 0.25;
            let singleProb = 0.35;
            let boundaryProb = 0.20;
            let sixProb = 0.08;
            let wicketProb = 0.07;
            let extraProb = 0.05;

            // Adjust probabilities based on match situation
            const runRateRequired = (target - totalRuns) / (120 - totalBalls) * 6;
            const currentRunRate = totalBalls > 0 ? (totalRuns / totalBalls) * 6 : 0;

            if (runRateRequired > currentRunRate + 2) {
                // Need to accelerate - more attacking shots
                dotProb -= 0.05;
                boundaryProb += 0.05;
                sixProb += 0.03;
                wicketProb += 0.02;
            } else if (runRateRequired < currentRunRate - 2) {
                // Can afford to be conservative
                dotProb += 0.05;
                singleProb += 0.05;
                boundaryProb -= 0.05;
                sixProb -= 0.03;
                wicketProb -= 0.02;
            }

            // Determine outcome based on probabilities
            if (random < dotProb) outcomeIndex = 0;
            else if (random < dotProb + singleProb) outcomeIndex = 1;
            else if (random < dotProb + singleProb + 0.1) outcomeIndex = 2; // Double
            else if (random < dotProb + singleProb + 0.1 + 0.05) outcomeIndex = 3; // Triple
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb) outcomeIndex = 4;
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb + sixProb) outcomeIndex = 5;
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb + sixProb + wicketProb) outcomeIndex = 6;
            else outcomeIndex = 7; // Extras

            const outcome = ballOutcomes[outcomeIndex];

            // Update scores
            totalRuns += outcome.runs;
            partnershipRuns += outcome.runs;

            if (outcome.type === 'wicket') {
                wickets++;
                currentBowlerWickets++;
                partnershipRuns = 0;
                partnershipBalls = 0;
            }
            // Update bowler stats
            const bowlerOvers = Math.floor(currentBowlerBalls / 6);
            const bowlerBalls = currentBowlerBalls % 6;
            document.getElementById('bowler').textContent = `P. Cummins: ${bowlerOvers}-${bowlerBalls}-${currentBowlerRuns}-${currentBowlerWickets}`;

            // Update partnership
            document.getElementById('partnership').textContent = `${partnershipRuns} runs, ${partnershipBalls} balls`;

            // Calculate run rates
            const currentRR = totalBalls > 0 ? (totalRuns / totalBalls) * 6 : 0;
            const bowlerEcon = currentBowlerBalls > 0 ? (currentBowlerRuns / currentBowlerBalls) * 6 : 0;
            document.getElementById('currentRunRate').textContent = `CRR: ${currentRR.toFixed(2)}`;
            document.getElementById('bowlerEconomy').textContent = `Econ: ${bowlerEcon.toFixed(2)}`;

            // Update commentary with more variety
            const commentaryType = outcome.type;
            const commentaryOptions = commentaryTemplates[commentaryType] || [outcome.text];
            const randomCommentary = commentaryOptions[Math.floor(Math.random() * commentaryOptions.length)];

            document.getElementById('commentary').textContent = `${currentOver}.${currentBall}: ${randomCommentary}`;

            // Update ball-by-ball
            const ballEvent = document.createElement('div');
            ballEvent.className = 'ball-event';

            let ballResult = "";
            if (outcomeIndex === 6) {
                ballResult = "W";
            } else if (outcomeIndex === 7 || outcomeIndex === 8) {
                ballResult = outcomeIndex === 7 ? "Wd" : "Nb";
                if (outcome.runs > 0) ballResult += "+" + outcome.runs;
            } else {
                ballResult = outcome.runs.toString();
            }

            ballEvent.innerHTML = `
                <span>${currentOver}.${currentBall}</span>
                <span>${ballResult}</span>
                <span>${totalRuns}/${wickets}</span>
            `;

            // Add color based on outcome
            if (outcomeIndex === 6) {
                ballEvent.style.backgroundColor = 'rgba(230, 57, 70, 0.1)';
            } else if (outcome.runs >= 4) {
                ballEvent.style.backgroundColor = 'rgba(56, 176, 0, 0.1)';
            }

            document.getElementById('ballByBall').prepend(ballEvent);

            // Calculate required run rate
            const ballsRemaining = 120 - totalBalls;
            const runsNeeded = target - totalRuns;
            const requiredRR = ballsRemaining > 0 ? (runsNeeded / ballsRemaining * 6).toFixed(2) : 0;
            document.getElementById('requiredRunRate').textContent = `RR: ${requiredRR}`;

            // Check if innings is complete
            if (totalRuns >= target) {
                document.getElementById('commentary').textContent = "Team wins! Target achieved with " + ballsRemaining + " balls remaining!";
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            } else if (wickets >= 10) {
                document.getElementById('commentary').textContent = "All out! Innings complete.";
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            } else if (totalBalls >= 120) {
                document.getElementById('commentary').textContent = "Innings complete! Final score: " + totalRuns + "/" + wickets;
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            }
        }



        // Smooth scrolling for navigation links
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');

                if (href && href.startsWith('#')) {
                    e.preventDefault();

                    // Remove active class from all links
                    document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));

                    // Add active class to clicked link
                    this.classList.add('active');

                    const target = document.querySelector(href);
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

        // Share prediction button
        document.getElementById('sharePredictionBtn').addEventListener('click', function () {
            const winner = document.getElementById('winner').textContent;
            const probability = document.getElementById('probability').textContent;

            const shareText = `CrickGenius predicts ${winner} to win with ${probability} probability! Try it at CrickGenius.com`;

            // Check if Web Share API is supported
            if (navigator.share) {
                navigator.share({
                    title: 'CrickGenius Match Prediction',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback: Copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Prediction copied to clipboard!');
                });
            }
        });

        // Detailed analysis button
        document.getElementById('detailedAnalysisBtn').addEventListener('click', function () {
            alert('Detailed analysis feature would show:\n\n- Team comparison by player positions\n- Head-to-head statistics\n- Pitch report analysis\n- Weather impact assessment\n- Player vs player matchups\n\nThis is a premium feature in the full version of CrickGenius!');
        });

        // Initialize the page
        window.onload = function () {
            // Initialize the chart with default data
            updateProbabilityChart("India", "Australia", 65, 35);

            // Trigger player analysis for default player
            document.getElementById('analyzeBtn').click();

            // Generate key factors for initial state
            generateKeyFactors("India", "Australia", 65, 35, "Hard", "Neutral", "T20", "Random");

            // Add scroll event to update active nav link
            window.addEventListener('scroll', function () {
                const sections = document.querySelectorAll('section[id]');
                const navLinks = document.querySelectorAll('nav a');

                let currentSection = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        currentSection = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + currentSection) {
                        link.classList.add('active');
                    }
                });
            });
        };

        loadCartCount();
    </script>
</body>

</html>nt-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <script>
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>

    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-cricket"></i>
                <span>CrickGenius</span>
            </a>

            <div class="hamburger" onclick="document.querySelector('.nav-links').classList.toggle('active')">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <nav class="nav-links">
                <a href="#prediction" onclick="document.querySelector('.nav-links').classList.remove('active')">Match
                    Prediction</a>
                <a href="#analyzer" onclick="document.querySelector('.nav-links').classList.remove('active')">Player
                    Analysis</a>
                <a href="#fantasy" onclick="document.querySelector('.nav-links').classList.remove('active')">Fantasy
                    Team</a>
                <a href="#simulator" onclick="document.querySelector('.nav-links').classList.remove('active')">Live
                    Simulator</a>
                <a href="merchandise.html">Merchandise</a>
                <a href="cart.html" class="nav-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
                <a href="profile.html" class="nav-icon">
                    <i class="fas fa-user-circle"></i>
                </a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-text">
                <h1>AI-Powered Cricket <br> <span style="color: var(--primary);">Analytics Platform</span></h1>
                <p style="font-size: 1.1rem; margin: 20px 0 30px;">
                    Experience the future of cricket with advanced match predictions, AI-driven player analysis,
                    and smart fantasy team generation. Dominate your fantasy leagues with data-backed insights.
                </p>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <a href="#prediction" class="btn btn-primary">
                        <i class="fas fa-chart-line"></i> Start Analysis
                    </a>
                    <a href="#fantasy" class="btn btn-secondary">
                        <i class="fas fa-users"></i> Fantasy Team
                    </a>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://t4.ftcdn.net/jpg/06/15/06/81/360_F_615068142_3siXSo1TWv7ebrf7OR0XdHurjzkcpJE3.jpg"
                    alt="Cricket Analytics Dashboard">
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Features Showcase -->
        <div class="features-grid">
            <div class="feature-card reveal">
                <i class="fas fa-trophy feature-icon"></i>
                <h3>Win Probability</h3>
                <p>Real-time win probability engine that adjusts with every ball, wicket, and boundary.</p>
            </div>
            <div class="feature-card reveal">
                <i class="fas fa-chart-pie feature-icon"></i>
                <h3>Player Stats</h3>
                <p>Deep dive into batting and bowling metrics with historical data comparisons.</p>
            </div>
            <div class="feature-card reveal">
                <i class="fas fa-chess-knight feature-icon"></i>
                <h3>Strategy AI</h3>
                <p>Tactical suggestions for field placements and bowling changes based on batters.</p>
            </div>
        </div>

        <div class="main-content">
            <!-- Feature 1: Match Prediction System -->
            <section id="prediction" class="reveal">
                <div class="glass glass-card">
                    <div class="card-header">
                        <h2 class="card-title">Match Prediction System</h2>
                        <i class="fas fa-robot card-icon" style="font-size: 1.5rem; color: var(--accent);"></i>
                    </div>
                    <p style="margin-bottom: 20px;">Select teams and match conditions to get AI-powered match
                        predictions with detailed analysis.</p>

                    <div class="prediction-form">
                        <div class="form-group">
                            <label for="teamA">Team A</label>
                            <select id="teamA">
                                <option value="India">India</option>
                                <option value="Australia">Australia</option>
                                <option value="England">England</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="South Africa">South Africa</option>
                                <option value="West Indies">West Indies</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="teamB">Team B</label>
                            <select id="teamB">
                                <option value="Australia">Australia</option>
                                <option value="India">India</option>
                                <option value="England">England</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="South Africa">South Africa</option>
                                <option value="West Indies">West Indies</option>
                                <option value="Sri Lanka">Sri Lanka</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="pitch">Pitch Condition</label>
                            <select id="pitch">
                                <option value="Hard">Hard & Bouncy</option>
                                <option value="Dry">Dry & Dusty</option>
                                <option value="Green">Green & Seaming</option>
                                <option value="Flat">Flat & Batting-friendly</option>
                                <option value="Slow">Slow & Turning</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="venue">Venue Advantage</label>
                            <select id="venue">
                                <option value="Neutral">Neutral Venue</option>
                                <option value="TeamA">Team A Home</option>
                                <option value="TeamB">Team B Home</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="format">Match Format</label>
                            <select id="format">
                                <option value="T20">T20 International</option>
                                <option value="ODI">One Day International</option>
                                <option value="Test">Test Match</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="toss">Toss Winner</label>
                            <select id="toss">
                                <option value="TeamA">Team A</option>
                                <option value="TeamB">Team B</option>
                                <option value="Random">Random (AI will predict)</option>
                            </select>
                        </div>

                        <button id="predictBtn" class="btn btn-primary btn-block"
                            style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-brain"></i> Predict Winner
                        </button>
                    </div>

                    <div id="predictionResult" class="prediction-result">
                        <div class="spinner" id="predictionSpinner"></div>
                        <div id="predictionContent" style="display: none;">
                            <div class="result-header">
                                <div>
                                    <h3>Predicted Winner</h3>
                                    <div id="winner" class="winner">India</div>
                                </div>
                                <div id="probability" class="probability">68%</div>
                            </div>

                            <div
                                style="display: flex; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; gap: 20px;">
                                <div>
                                    <div id="teamAProb" style="font-size: 1.2rem; font-weight: 600;">Team A: 68%</div>
                                    <div
                                        style="height: 10px; width: 200px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 5px; overflow: hidden;">
                                        <div id="teamABar"
                                            style="height: 100%; background: var(--success); width: 68%;"></div>
                                    </div>
                                </div>
                                <div>
                                    <div id="teamBProb" style="font-size: 1.2rem; font-weight: 600;">Team B: 32%</div>
                                    <div
                                        style="height: 10px; width: 200px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 5px; overflow: hidden;">
                                        <div id="teamBBar" style="height: 100%; background: var(--accent); width: 32%;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Key Factors -->
                            <div class="key-factors">
                                <h4>Key Factors Influencing Prediction</h4>
                                <div class="factors-grid" id="keyFactors">
                                    <!-- Factors will be added dynamically -->
                                </div>
                            </div>

                            <!-- Feature 4: Performance Graph -->
                            <div class="graph-container">
                                <canvas id="probabilityChart"></canvas>
                            </div>

                            <div style="margin-top: 20px; display: flex; gap: 15px;">
                                <button id="detailedAnalysisBtn" class="btn btn-secondary">
                                    <i class="fas fa-chart-bar"></i> Detailed Analysis
                                </button>
                                <button id="sharePredictionBtn" class="btn btn-primary">
                                    <i class="fas fa-share"></i> Share Prediction
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feature 2: Player Performance Analyzer -->
            <section id="analyzer" class="reveal mt-20">
                <div class="glass glass-card">
                    <div class="card-header">
                        <h2 class="card-title">Player Performance Analyzer</h2>
                        <i class="fas fa-chart-line card-icon" style="font-size: 1.5rem; color: var(--success);"></i>
                    </div>
                    <p style="margin-bottom: 20px;">Select a player to analyze their performance metrics, current form,
                        and suitability for upcoming matches.</p>

                    <div class="player-selector">
                        <select id="playerSelect"
                            style="flex: 1; padding: 12px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                            <option value="virat" style="color: black;">Virat Kohli</option>
                            <option value="smith" style="color: black;">Steve Smith</option>
                            <option value="williamson" style="color: black;">Kane Williamson</option>
                            <option value="root" style="color: black;">Joe Root</option>
                            <option value="babar" style="color: black;">Babar Azam</option>
                            <option value="warner" style="color: black;">David Warner</option>
                        </select>
                        <button id="analyzeBtn" class="btn btn-primary">
                            <i class="fas fa-search"></i> Analyze
                        </button>
                    </div>

                    <div id="playerAnalysis" class="player-card" style="display: none;">
                        <div class="player-img-container">
                            <img id="playerImage" src="https://via.placeholder.com/200x250/3a86ff/ffffff?text=Player"
                                alt="Player">
                        </div>
                        <div>
                            <h3 id="playerName" style="margin-bottom: 10px; font-size: 1.8rem;">Player Name</h3>
                            <div id="playerRole"
                                style="opacity: 0.8; margin-bottom: 15px; font-size: 1.1rem; color: var(--accent);">
                                Batsman</div>
                            <div id="playerForm" style="margin-bottom: 15px;">
                                <span style="font-weight: 600;">Current Form:</span>
                                <span id="formValue" style="color: var(--success);">Excellent</span>
                                <div
                                    style="height: 8px; width: 100%; background: #495057; border-radius: 4px; margin-top: 5px; overflow: hidden;">
                                    <div id="formBar" style="height: 100%; background: var(--success); width: 85%;">
                                    </div>
                                </div>
                            </div>

                            <div class="player-stats"
                                style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="formScore" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">8.5</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Form Score</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="strikePower" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">145</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Strike Power</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="consistency" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">85%</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Consistency</div>
                                </div>
                                <div class="stat"
                                    style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center;">
                                    <div id="pressureHandling" class="stat-value"
                                        style="font-size: 1.5rem; font-weight: bold;">8.2</div>
                                    <div class="stat-label" style="font-size: 0.8rem; opacity: 0.7;">Pressure Handling
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="playerDetails" style="margin-top: 25px; display: none;">
                        <h4 style="margin-bottom: 15px;">Performance Analysis</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div
                                style="background: rgba(56, 176, 0, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--success);">
                                <h5 style="color: var(--success); margin-bottom: 10px;">Strengths</h5>
                                <ul id="strengthsList" style="padding-left: 20px;">
                                    <li>Excellent against pace bowling</li>
                                    <li>Strong in chasing situations</li>
                                    <li>High consistency in home conditions</li>
                                </ul>
                            </div>
                            <div
                                style="background: rgba(230, 57, 70, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--danger);">
                                <h5 style="color: var(--danger); margin-bottom: 10px;">Weaknesses</h5>
                                <ul id="weaknessesList" style="padding-left: 20px;">
                                    <li>Vulnerable against left-arm spin</li>
                                    <li>Lower average in away matches</li>
                                    <li>Struggles in swinging conditions</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Performance Trends Graph -->
                        <div style="margin-top: 25px;">
                            <h5 style="margin-bottom: 15px;">Performance Trends (Last 10 Matches)</h5>
                            <div class="graph-container">
                                <canvas id="playerTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Feature 3: Fantasy Team Generator -->
        <section id="fantasy" class="reveal mt-20">
            <div class="glass glass-card">
                <div class="card-header">
                    <h2 class="card-title">Fantasy Team Generator</h2>
                    <i class="fas fa-users card-icon" style="font-size: 1.5rem; color: var(--accent);"></i>
                </div>
                <p style="margin-bottom: 25px;">Generate a balanced fantasy team with AI-powered selection based on
                    current form, pitch conditions, and player matchups.</p>

                <div class="team-generator">
                    <div class="grid-form">
                        <div class="form-group">
                            <label for="fantasyFormat">Match Format</label>
                            <select id="fantasyFormat">
                                <option value="T20">T20</option>
                                <option value="ODI">ODI</option>
                                <option value="Test">Test</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fantasyBudget">Budget (in Cr)</label>
                            <select id="fantasyBudget">
                                <option value="100">100 Crores</option>
                                <option value="90">90 Crores</option>
                                <option value="80">80 Crores</option>
                            </select>
                        </div>
                    </div>

                    <button id="generateTeamBtn" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
                        <i class="fas fa-magic"></i> Generate Best Playing XI
                    </button>

                    <div class="spinner" id="teamSpinner" style="display: none;"></div>

                    <div id="teamContainer" class="team-container" style="display: none;">
                        <!-- Team will be generated here -->
                    </div>

                    <div class="team-categories" id="teamCategories"
                        style="display: none; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; text-align: center;">
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="batsmenCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--success);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Batsmen</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="allroundersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--warning);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">All-rounders</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="bowlersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--accent);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Bowlers</div>
                        </div>
                        <div class="category"
                            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                            <div class="category-count" id="wicketkeepersCount"
                                style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">0</div>
                            <div class="category-label" style="font-size: 0.9rem; opacity: 0.8;">Wicketkeepers</div>
                        </div>
                    </div>

                    <div style="margin-top: 25px; text-align: center;">
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <div
                                style="background: rgba(40, 167, 69, 0.2); color: #28a745; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(40, 167, 69, 0.3);">
                                <i class="fas fa-check-circle"></i> Balanced Team
                            </div>
                            <div
                                style="background: rgba(23, 162, 184, 0.2); color: #17a2b8; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(23, 162, 184, 0.3);">
                                <i class="fas fa-brain"></i> AI Selection
                            </div>
                            <div
                                style="background: rgba(255, 193, 7, 0.2); color: #ffc107; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; border: 1px solid rgba(255, 193, 7, 0.3);">
                                <i class="fas fa-coins"></i> Budget Optimized
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <br>

        <!-- Feature 5: Live Score Simulator -->
        <section id="simulator" class="card reveal">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Live Score Simulator</h2>
                    <i class="fas fa-broadcast-tower card-icon"></i>
                </div>
                <p style="margin-bottom: 20px;">Experience real-time cricket simulation with ball-by-ball updates,
                    realistic gameplay, and AI-generated commentary.</p>

                <div class="simulator-controls">
                    <button id="startSimulation" class="btn btn-primary">
                        <i class="fas fa-play"></i> Start Simulation
                    </button>
                    <button id="pauseSimulation" class="btn btn-secondary" disabled>
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button id="nextBall" class="btn btn-primary" disabled>
                        <i class="fas fa-forward"></i> Next Ball
                    </button>
                    <button id="resetSimulation" class="btn">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <label>Speed:</label>
                        <select id="simulationSpeed">
                            <option value="1000">Slow</option>
                            <option value="500" selected>Normal</option>
                            <option value="200">Fast</option>
                            <option value="0">Instant</option>
                        </select>
                    </div>
                </div>

                <div id="scoreDisplay" class="score-display" style="display: none;">
                    <div class="score-header">
                        <div>
                            <div style="font-size: 1.2rem; opacity: 0.8;" id="matchTitle">IND vs AUS - T20 Match</div>
                            <div id="currentScore" class="current-score">0/0 (0.0)</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.2rem; opacity: 0.8;">Target: <span id="targetScore">180</span>
                            </div>
                            <div id="requiredRunRate" style="font-size: 1.5rem; font-weight: 700;">RR: 9.00</div>
                        </div>
                    </div>

                    <div class="over-progress">
                        <div id="overProgressFill" class="over-progress-fill"></div>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 15px; flex-wrap: wrap; gap: 15px;">
                        <div>
                            <div style="opacity: 0.8;">Batsmen</div>
                            <div id="batsman1" style="font-weight: 600;">R. Sharma: 0(0)</div>
                            <div id="batsman2" style="font-weight: 600;">V. Kohli: 0(0)</div>
                        </div>
                        <div>
                            <div style="opacity: 0.8;">Partnership</div>
                            <div id="partnership" style="font-weight: 600;">0 runs, 0 balls</div>
                            <div id="currentRunRate" style="font-size: 0.9rem;">CRR: 0.00</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="opacity: 0.8;">Bowler</div>
                            <div id="bowler" style="font-weight: 600;">P. Cummins: 0-0-0-0</div>
                            <div id="bowlerEconomy" style="font-size: 0.9rem;">Econ: 0.00</div>
                        </div>
                    </div>

                    <div
                        style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div id="commentary" style="font-style: italic;">Match about to begin...</div>
                    </div>

                    <h4 style="margin-bottom: 10px;">Ball-by-Ball Commentary</h4>
                    <div id="ballByBall" class="ball-by-ball">
                        <!-- Ball events will appear here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="how-it-works reveal">
            <div class="container">
                <h2 style="text-align: center; margin-bottom: 20px; font-size: 2.5rem;">How CrickGenius Works</h2>
                <p
                    style="text-align: center; margin-bottom: 40px; max-width: 800px; margin-left: auto; margin-right: auto; opacity: 0.9;">
                    Our platform uses a combination of statistical analysis, machine learning algorithms, and real-time
                    data to deliver accurate predictions and insights.
                </p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Data Collection</h3>
                        <p>We gather real-time player statistics, pitch reports, weather conditions, and historical
                            match data.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>AI Analysis</h3>
                        <p>Our algorithms process the data to identify patterns, player form, and match conditions.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Prediction Models</h3>
                        <p>We apply multiple prediction models to forecast match outcomes and player performance.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <h3>Results & Insights</h3>
                        <p>You receive easy-to-understand predictions, visualizations, and actionable insights.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container reveal">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>CrickGenius</h3>
                    <p>AI-powered cricket analytics platform with advanced prediction algorithms and performance
                        analysis.</p>
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <i class="fab fa-js-square" style="font-size: 2rem; color: var(--accent);"></i>
                        <i class="fab fa-html5" style="font-size: 2rem; color: var(--warning);"></i>
                        <i class="fab fa-css3-alt" style="font-size: 2rem; color: var(--primary);"></i>
                        <i class="fas fa-chart-line" style="font-size: 2rem; color: var(--success);"></i>
                    </div>
                </div>

                <div class="footer-section">
                    <h3>Features</h3>
                    <ul style="list-style: none;">
                        <li>âœ“ AI Match Prediction</li>
                        <li>âœ“ Player Performance Analysis</li>
                        <li>âœ“ Fantasy Team Generator</li>
                        <li>âœ“ Live Score Simulation</li>
                        <li>âœ“ Data Visualization</li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>AI Logic Implementation</h3>
                    <p>Rule-based AI algorithms using JavaScript for:</p>
                    <ul style="list-style: none;">
                        <li>â€¢ Pitch type impact analysis</li>
                        <li>â€¢ Player form evaluation</li>
                        <li>â€¢ Probability calculations</li>
                        <li>â€¢ Dynamic team generation</li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                &copy; 2026 CrickGenius. All rights reserved. | The Times of India
            </div>
        </div>
    </footer>

    <script>
        // Player data for analyzer
        const playerData = {
            virat: {
                name: "Virat Kohli",
                role: "Top-order Batsman",
                form: "Excellent",
                formScore: 8.7,
                strikePower: 138,
                consistency: "92%",
                pressureHandling: 9.1,
                strengths: [
                    "Excellent against pace bowling",
                    "Strong in chasing situations",
                    "High consistency in home conditions"
                ],
                weaknesses: [
                    "Vulnerable against left-arm spin",
                    "Struggles in swinging conditions"
                ],
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Virat_Kohli_in_PMO_New_Delhi.jpg/500px-Virat_Kohli_in_PMO_New_Delhi.jpg"
            }

            ,
            smith: {
                name: "Steve Smith",
                role: "Middle-order Batsman",
                form: "Very Good",
                formScore: 8.2,
                strikePower: 125,
                consistency: "89%",
                pressureHandling: 8.8,
                strengths: ["Unorthodox but effective technique", "Excellent in Test matches", "Strong against spin bowling", "Great concentration"],
                weaknesses: ["Lower strike rate in T20s", "Can struggle against in-swingers", "Limited range of shots"],
                image: "https://circleofcricket.com/post_image/post_image_70586f0.jpg"
            },
            williamson: {
                name: "Kane Williamson",
                role: "Top-order Batsman (Captain)",
                form: "Good",
                formScore: 7.9,
                strikePower: 122,
                consistency: "91%",
                pressureHandling: 8.5,
                strengths: ["Excellent technique and temperament", "Great leadership skills", "Strong in all formats", "Adaptable to conditions"],
                weaknesses: ["Not a power hitter", "Can be slow in T20s", "Struggles against extreme pace"],
                image: "https://scontent.frpr5-1.fna.fbcdn.net/v/t1.6435-9/89002361_3735408589832459_6012288395684872192_n.jpg?_nc_cat=1&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=zt4lNZ2Yl_8Q7kNvwHRFKtv&_nc_oc=AdkzF0wZbBe0P5yX_TJube0Q5bnHYxMcEtzOfevYVkjrgqgGaP3IErU-6t1bXgfOLRNG30WMa5gLg5VJFa2TZMrR&_nc_zt=23&_nc_ht=scontent.frpr5-1.fna&_nc_gid=EuAsewwTqkDNYsPPZ39zLg&oh=00_Afqgh2u_Mkji601X3INq_Yeo17UTjO6UeTzAAA-C5swEGg&oe=6995F09A"
            },
            root: {
                name: "Joe Root",
                role: "Middle-order Batsman",
                form: "Good",
                formScore: 7.8,
                strikePower: 120,
                consistency: "88%",
                pressureHandling: 8.3,
                strengths: ["Classical batsman with solid technique", "Excellent in English conditions", "Good against pace bowling", "Consistent performer"],
                weaknesses: ["Not a big hitter", "Can struggle against quality spin", "Lower strike rate in limited overs"],
                image: "https://www.asksportsinfo.com/wp-content/uploads/1990/12/Joe-Root-England-Cricketer.webp"
            },
            babar: {
                name: "Babar Azam",
                role: "Top-order Batsman",
                form: "Excellent",
                formScore: 8.6,
                strikePower: 130,
                consistency: "90%",
                pressureHandling: 8.4,
                strengths: ["Elegant stroke player", "Consistent across formats", "Good against both pace and spin", "Excellent timer of the ball"],
                weaknesses: ["Can struggle against extreme bounce", "Sometimes slow between wickets", "Limited experience in tough away conditions"],
                image: "https://scontent.frpr5-1.fna.fbcdn.net/v/t39.30808-1/347548743_279026471339257_7532264635443883593_n.jpg?stp=dst-jpg_s200x200_tt6&_nc_cat=102&ccb=1-7&_nc_sid=2d3e12&_nc_ohc=QOpYRVsV-FsQ7kNvwGWNbaU&_nc_oc=AdkXugSwIkDdY-Hn0MYdvG1_cZzmvLyGUedu9ITtMPJ6VlF3AANOliIXLqMebXsihnDrUPDFDhKSTaY2tvfeyDh9&_nc_zt=24&_nc_ht=scontent.frpr5-1.fna&_nc_gid=EuTxAqSFTIlsEOtFxylQ3A&oh=00_Afpqc2XofaEUho6kbObtg19lDYEu5ZyXkPKSW-eEpj_5gg&oe=69745306"
            },
            warner: {
                name: "David Warner",
                role: "Opening Batsman",
                form: "Very Good",
                formScore: 8.1,
                strikePower: 145,
                consistency: "85%",
                pressureHandling: 8.0,
                strengths: ["Aggressive stroke player", "Excellent in powerplays", "Great fielder", "Experience in all conditions"],
                weaknesses: ["Can be vulnerable against swing early", "Struggles against spin at times", "Inconsistent in longer formats"],
                image: "https://cdn.pixabay.com/photo/2024/04/11/05/29/david-warner-8689228_1280.jpg"
            }
        };

        // Team data for fantasy generator
        const fantasyPlayers = {
            T20: [
                { name: "Virat Kohli", role: "Batsman", price: 10.5, form: 8.7 },
                { name: "Rohit Sharma", role: "Batsman", price: 10.0, form: 8.4 },
                { name: "Jasprit Bumrah", role: "Bowler", price: 9.5, form: 8.8 },
                { name: "Glenn Maxwell", role: "All-rounder", price: 9.0, form: 8.2 },
                { name: "Ben Stokes", role: "All-rounder", price: 9.5, form: 8.5 },
                { name: "Kagiso Rabada", role: "Bowler", price: 9.0, form: 8.3 },
                { name: "Jos Buttler", role: "Wicketkeeper", price: 10.0, form: 8.3 },
                { name: "Rashid Khan", role: "Bowler", price: 9.5, form: 9.0 },
                { name: "Kane Williamson", role: "Batsman", price: 9.0, form: 7.9 },
                { name: "Trent Boult", role: "Bowler", price: 8.5, form: 8.1 },
                { name: "AB de Villiers", role: "Batsman", price: 9.5, form: 8.6 },
                { name: "Sunil Narine", role: "All-rounder", price: 8.5, form: 7.8 },
                { name: "MS Dhoni", role: "Wicketkeeper", price: 9.0, form: 8.0 },
                { name: "Pat Cummins", role: "Bowler", price: 9.0, form: 8.4 },
                { name: "Steve Smith", role: "Batsman", price: 9.5, form: 8.2 },
                { name: "Hardik Pandya", role: "All-rounder", price: 9.0, form: 8.1 },
                { name: "David Warner", role: "Batsman", price: 10.0, form: 8.1 },
                { name: "Shaheen Afridi", role: "Bowler", price: 8.5, form: 8.2 },
                { name: "Quinton de Kock", role: "Wicketkeeper", price: 8.5, form: 8.0 },
                { name: "Andre Russell", role: "All-rounder", price: 9.0, form: 8.3 }
            ]
        };

        const revealElements = document.querySelectorAll('.reveal');

        const revealOnScroll = () => {
            const windowHeight = window.innerHeight;
            const revealPoint = 100;

            revealElements.forEach(el => {
                const elementTop = el.getBoundingClientRect().top;

                if (elementTop < windowHeight - revealPoint) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active'); // ðŸ” reset animation
                }
            });
        };

        window.addEventListener('scroll', revealOnScroll);
        window.addEventListener('load', revealOnScroll);



        // Match prediction AI logic
        document.getElementById('predictBtn').addEventListener('click', function () {
            const teamA = document.getElementById('teamA').value;
            const teamB = document.getElementById('teamB').value;
            const pitch = document.getElementById('pitch').value;
            const venue = document.getElementById('venue').value;
            const format = document.getElementById('format').value;
            const toss = document.getElementById('toss').value;

            // Show loading spinner
            document.getElementById('predictionSpinner').style.display = 'block';
            document.getElementById('predictionContent').style.display = 'none';
            document.getElementById('predictionResult').style.display = 'block';

            // Simulate AI processing delay
            setTimeout(function () {
                // AI Logic: Calculate winning probabilities based on conditions

                // Team strength factors (based on ICC rankings and recent form)
                const teamStrength = {
                    "India": { T20: 85, ODI: 87, Test: 88 },
                    "Australia": { T20: 82, ODI: 85, Test: 86 },
                    "England": { T20: 84, ODI: 86, Test: 85 },
                    "Pakistan": { T20: 83, ODI: 80, Test: 79 },
                    "New Zealand": { T20: 81, ODI: 83, Test: 84 },
                    "South Africa": { T20: 79, ODI: 81, Test: 82 },
                    "West Indies": { T20: 80, ODI: 76, Test: 72 },
                    "Sri Lanka": { T20: 77, ODI: 78, Test: 76 }
                };

                // Pitch impact factors
                const pitchImpact = {
                    "Hard": { batting: 1.2, bowling: 0.9, spin: 0.8, pace: 1.3 },
                    "Dry": { batting: 0.9, bowling: 1.3, spin: 1.4, pace: 0.9 },
                    "Green": { batting: 0.8, bowling: 1.4, spin: 0.7, pace: 1.5 },
                    "Flat": { batting: 1.3, bowling: 0.8, spin: 0.8, pace: 0.9 },
                    "Slow": { batting: 0.9, bowling: 1.2, spin: 1.3, pace: 0.8 }
                };

                // Venue impact
                const venueImpact = {
                    "Neutral": 0,
                    "TeamA": 8,
                    "TeamB": -8
                };

                // Format impact
                const formatImpact = {
                    "T20": { variance: 1.3 },
                    "ODI": { variance: 1.1 },
                    "Test": { variance: 1.0 }
                };

                // Calculate team A probability
                let teamAProbability = teamStrength[teamA][format];
                let teamBProbability = teamStrength[teamB][format];

                // Apply pitch impact
                const pitchFactor = pitchImpact[pitch];
                teamAProbability *= (pitchFactor.batting + pitchFactor.bowling) / 2;
                teamBProbability *= (pitchFactor.batting + pitchFactor.bowling) / 2;

                // Apply venue impact
                if (venue === "TeamA") {
                    teamAProbability += venueImpact[venue];
                } else if (venue === "TeamB") {
                    teamBProbability += venueImpact[venue];
                }

                // Apply toss impact
                let tossImpact = 0;
                if (toss === "TeamA") {
                    tossImpact = 3;
                    teamAProbability += tossImpact;
                } else if (toss === "TeamB") {
                    tossImpact = 3;
                    teamBProbability += tossImpact;
                } else {
                    // Random toss - add some randomness
                    const randomToss = Math.random() > 0.5 ? teamA : teamB;
                    if (randomToss === teamA) {
                        teamAProbability += 3;
                    } else {
                        teamBProbability += 3;
                    }
                }

                // Add some randomness based on format
                const randomFactor = (Math.random() * 10 - 5) * formatImpact[format].variance;
                teamAProbability += randomFactor;
                teamBProbability -= randomFactor;

                // Ensure probabilities are within reasonable bounds
                teamAProbability = Math.max(30, Math.min(95, teamAProbability));
                teamBProbability = Math.max(30, Math.min(95, teamBProbability));

                // Normalize to get probabilities
                const total = teamAProbability + teamBProbability;
                const teamAFinal = Math.round((teamAProbability / total) * 100);
                const teamBFinal = 100 - teamAFinal;

                // Determine winner
                const winner = teamAFinal > teamBFinal ? teamA : teamB;

                // Display results
                document.getElementById('winner').textContent = winner;
                document.getElementById('probability').textContent = Math.max(teamAFinal, teamBFinal) + "%";
                document.getElementById('teamAProb').textContent = `${teamA}: ${teamAFinal}%`;
                document.getElementById('teamBProb').textContent = `${teamB}: ${teamBFinal}%`;
                document.getElementById('teamABar').style.width = `${teamAFinal}%`;
                document.getElementById('teamBBar').style.width = `${teamBFinal}%`;

                // Generate key factors
                generateKeyFactors(teamA, teamB, teamAFinal, teamBFinal, pitch, venue, format, toss);

                // Update the chart
                updateProbabilityChart(teamA, teamB, teamAFinal, teamBFinal);

                // Hide spinner and show content
                document.getElementById('predictionSpinner').style.display = 'none';
                document.getElementById('predictionContent').style.display = 'block';

            }, 1500); // 1.5 second delay to simulate AI processing
        });

        // Feature 4: Probability Chart
        let probabilityChart = null;

        function updateProbabilityChart(teamA, teamB, probA, probB) {
            const ctx = document.getElementById('probabilityChart').getContext('2d');

            // Destroy existing chart if it exists
            if (probabilityChart) {
                probabilityChart.destroy();
            }

            // Create new chart
            probabilityChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [teamA, teamB],
                    datasets: [{
                        label: 'Win Probability %',
                        data: [probA, probB],
                        backgroundColor: [
                            'rgba(58, 134, 255, 0.8)',
                            'rgba(131, 56, 236, 0.8)'
                        ],
                        borderColor: [
                            'rgb(58, 134, 255)',
                            'rgb(131, 56, 236)'
                        ],
                        borderWidth: 2,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // Generate key factors for match prediction
        function generateKeyFactors(teamA, teamB, probA, probB, pitch, venue, format, toss) {
            const factorsGrid = document.getElementById('keyFactors');
            factorsGrid.innerHTML = '';

            const factors = [
                { name: 'Team Form', value: teamA, impact: '+12%', positive: probA > probB },
                { name: 'Pitch Conditions', value: pitch, impact: pitch === 'Flat' ? '+8%' : '+5%', positive: true },
                { name: 'Home Advantage', value: venue === 'TeamA' ? teamA : venue === 'TeamB' ? teamB : 'Neutral', impact: venue !== 'Neutral' ? '+6%' : '0%', positive: venue !== 'Neutral' },
                { name: 'Toss Impact', value: toss === 'Random' ? 'AI Predicted' : toss, impact: '+3%', positive: true },
                { name: 'Head-to-Head', value: 'Even', impact: '+2%', positive: true },
                { name: 'Player Availability', value: 'Full Squads', impact: '0%', positive: true }
            ];

            factors.forEach(factor => {
                const factorDiv = document.createElement('div');
                factorDiv.className = 'factor';

                factorDiv.innerHTML = `
                    <div class="factor-name">${factor.name}</div>
                    <div class="factor-value ${factor.positive ? '' : 'factor-negative'}">${factor.impact}</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">${factor.value}</div>
                `;

                factorsGrid.appendChild(factorDiv);
            });
        }

        // Feature 2: Player Performance Analyzer
        document.getElementById('analyzeBtn').addEventListener('click', function () {
            const playerId = document.getElementById('playerSelect').value;
            const player = playerData[playerId];

            // Show player card
            document.getElementById('playerAnalysis').style.display = 'grid';
            document.getElementById('playerDetails').style.display = 'block';

            // Update player info
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerRole').textContent = player.role;
            document.getElementById('formValue').textContent = player.form;
            document.getElementById('formScore').textContent = player.formScore;
            document.getElementById('strikePower').textContent = player.strikePower;
            document.getElementById('consistency').textContent = player.consistency;
            document.getElementById('pressureHandling').textContent = player.pressureHandling;

            // Update form bar
            const formPercent = (player.formScore / 10) * 100;
            document.getElementById('formBar').style.width = `${formPercent}%`;

            // Update player image
            document.getElementById('playerImage').src = player.image;

            // Update strengths and weaknesses
            const strengthsList = document.getElementById('strengthsList');
            strengthsList.innerHTML = '';
            player.strengths.forEach(strength => {
                const li = document.createElement('li');
                li.textContent = strength;
                strengthsList.appendChild(li);
            });

            const weaknessesList = document.getElementById('weaknessesList');
            weaknessesList.innerHTML = '';
            player.weaknesses.forEach(weakness => {
                const li = document.createElement('li');
                li.textContent = weakness;
                weaknessesList.appendChild(li);
            });


            // âœ… HAMBURGER MENU (GLOBAL)
            document.getElementById('hamburger')?.addEventListener('click', function () {
                document.querySelector('nav').classList.toggle('active');
            });

            // Close menu when clicking outside (mobile)
            document.addEventListener('click', function (e) {
                if (window.innerWidth <= 768) {
                    const nav = document.querySelector('nav');
                    const hamburger = document.getElementById('hamburger');

                    if (
                        nav.classList.contains('active') &&
                        !nav.contains(e.target) &&
                        !hamburger.contains(e.target)
                    ) {
                        nav.classList.remove('active');
                    }
                }
            });


            // Update player trends chart
            updatePlayerTrendsChart(player.name);
        });

        // Player trends chart
        let playerTrendsChart = null;

        function updatePlayerTrendsChart(playerName) {
            const ctx = document.getElementById('playerTrendsChart').getContext('2d');

            // Generate random performance data for last 10 matches
            const matches = ['Match 1', 'Match 2', 'Match 3', 'Match 4', 'Match 5', 'Match 6', 'Match 7', 'Match 8', 'Match 9', 'Match 10'];
            const scores = [];

            for (let i = 0; i < 10; i++) {
                // Generate somewhat realistic scores with some randomness
                const baseScore = Math.floor(Math.random() * 80) + 20;
                scores.push(baseScore);
            }

            // Destroy existing chart if it exists
            if (playerTrendsChart) {
                playerTrendsChart.destroy();
            }

            // Create new chart
            playerTrendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: matches,
                    datasets: [{
                        label: 'Runs Scored',
                        data: scores,
                        backgroundColor: 'rgba(58, 134, 255, 0.1)',
                        borderColor: 'rgb(58, 134, 255)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Runs'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Feature 3: Fantasy Team Generator
        document.getElementById('generateTeamBtn').addEventListener('click', function () {
            const format = document.getElementById('fantasyFormat').value;
            const budget = parseInt(document.getElementById('fantasyBudget').value);

            // Show loading spinner
            document.getElementById('teamSpinner').style.display = 'block';
            document.getElementById('teamContainer').style.display = 'none';
            document.getElementById('teamCategories').style.display = 'none';

            // Simulate AI processing delay
            setTimeout(function () {
                const teamContainer = document.getElementById('teamContainer');
                teamContainer.innerHTML = '';

                // AI Logic: Generate balanced team based on format and budget
                let availablePlayers = [...fantasyPlayers.T20]; // Uses T20 pool as base

                // Randomize players (Fisher-Yates Shuffle)
                for (let i = availablePlayers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [availablePlayers[i], availablePlayers[j]] = [availablePlayers[j], availablePlayers[i]];
                }

                // Define team composition for 11 players
                let composition;
                if (format === 'T20') {
                    composition = { batsmen: 4, allrounders: 3, bowlers: 3, wicketkeepers: 1 };
                } else if (format === 'ODI') {
                    composition = { batsmen: 5, allrounders: 2, bowlers: 3, wicketkeepers: 1 };
                } else { // Test
                    composition = { batsmen: 5, allrounders: 2, bowlers: 3, wicketkeepers: 1 };
                }

                // Select team with AI logic
                const selectedPlayers = [];
                let totalCost = 0;
                let batsmenCount = 0;
                let allroundersCount = 0;
                let bowlersCount = 0;
                let wicketkeepersCount = 0;

                // Helper function to get players by role
                const getPlayersByRole = (role) => {
                    return availablePlayers.filter(p => p.role === role);
                };

                // Select wicketkeeper
                const wicketkeepers = getPlayersByRole('Wicketkeeper');
                if (wicketkeepers.length > 0) {
                    const wk = wicketkeepers[0];
                    selectedPlayers.push(wk);
                    totalCost += wk.price;
                    wicketkeepersCount++;
                    availablePlayers = availablePlayers.filter(p => p.name !== wk.name);
                }

                // Select batsmen
                const batsmen = getPlayersByRole('Batsman');
                for (let i = 0; i < composition.batsmen && batsmen.length > i; i++) {
                    const batsman = batsmen[i];
                    if (totalCost + batsman.price <= budget) {
                        selectedPlayers.push(batsman);
                        totalCost += batsman.price;
                        batsmenCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== batsman.name);
                    }
                }

                // Select all-rounders
                const allrounders = getPlayersByRole('All-rounder');
                for (let i = 0; i < composition.allrounders && allrounders.length > i; i++) {
                    const allrounder = allrounders[i];
                    if (totalCost + allrounder.price <= budget) {
                        selectedPlayers.push(allrounder);
                        totalCost += allrounder.price;
                        allroundersCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== allrounder.name);
                    }
                }

                // Select bowlers
                const bowlers = getPlayersByRole('Bowler');
                for (let i = 0; i < composition.bowlers && bowlers.length > i; i++) {
                    const bowler = bowlers[i];
                    if (totalCost + bowler.price <= budget) {
                        selectedPlayers.push(bowler);
                        totalCost += bowler.price;
                        bowlersCount++;
                        availablePlayers = availablePlayers.filter(p => p.name !== bowler.name);
                    }
                }

                // Fill remaining spots if less than 11 (due to budget or random shuffle)
                // This logic is a simplified fallback
                while (selectedPlayers.length < 11 && availablePlayers.length > 0) {
                    const p = availablePlayers.pop();
                    if (totalCost + p.price <= budget + 5) { // allow slight buffer for fallback
                        selectedPlayers.push(p);
                        totalCost += p.price;
                        if (p.role === 'Batsman') batsmenCount++;
                        else if (p.role === 'Bowler') bowlersCount++;
                        else if (p.role === 'Wicketkeeper') wicketkeepersCount++;
                        else allroundersCount++;
                    }
                }

                // Display the team
                const teamList = document.createElement('div');
                teamList.className = 'team-list';

                selectedPlayers.forEach(player => {
                    let icon = 'fa-user';
                    if (player.role === 'Batsman') icon = 'fa-baseball-bat-ball';
                    if (player.role === 'Bowler') icon = 'fa-bowling-ball';
                    if (player.role === 'All-rounder') icon = 'fa-bolt';
                    if (player.role === 'Wicketkeeper') icon = 'fa-hands';

                    const playerItem = document.createElement('div');
                    playerItem.className = 'player-item';
                    playerItem.innerHTML = `
                        <div class="player-info">
                            <div class="player-role-icon">
                                <i class="fas ${icon}"></i>
                            </div>
                            <div>
                                <div class="player-name">${player.name}</div>
                                <div class="player-role-text">${player.role}</div>
                            </div>
                        </div>
                        <div class="player-price">${player.price} Cr</div>
                    `;
                    teamList.appendChild(playerItem);
                });

                teamContainer.innerHTML = '';
                teamContainer.appendChild(teamList);

                // Update category counts
                document.getElementById('batsmenCount').textContent = batsmenCount;
                document.getElementById('allroundersCount').textContent = allroundersCount;
                document.getElementById('bowlersCount').textContent = bowlersCount;
                document.getElementById('wicketkeepersCount').textContent = wicketkeepersCount;

                // Show the team container and categories
                document.getElementById('teamSpinner').style.display = 'none';
                teamContainer.style.display = 'block'; // Changed to block for new styling
                document.getElementById('teamCategories').style.display = 'grid'; // Grid for counts

                // Show summary
                const remainingBudget = (budget - totalCost).toFixed(1);
                const avgForm = (selectedPlayers.reduce((sum, p) => sum + p.form, 0) / selectedPlayers.length).toFixed(1);

                // Show a message about the team
                setTimeout(function () {
                    alert(`Fantasy Team Generated Successfully!\n\nTotal Players: ${selectedPlayers.length}\nTotal Cost: ${totalCost.toFixed(1)} Cr\nRemaining Budget: ${remainingBudget} Cr\nAverage Player Form: ${avgForm}/10\n\nThis team is optimized for ${format} format.`);
                }, 300);

            }, 1200); // 1.2 second delay to simulate AI processing
        });

        // Feature 5: Live Score Simulator
        let simulationInterval;
        let currentOver = 0;
        let currentBall = 0;
        let totalBalls = 0;
        let totalRuns = 0;
        let wickets = 0;
        let target = 180;
        let isSimulationRunning = false;
        let isPaused = false;
        let partnershipRuns = 0;
        let partnershipBalls = 0;
        let currentBowlerRuns = 0;
        let currentBowlerBalls = 0;
        let currentBowlerWickets = 0;

        const ballOutcomes = [
            { runs: 0, text: "Dot ball. Excellent line and length.", type: "dot" },
            { runs: 1, text: "Single taken. Good placement.", type: "single" },
            { runs: 2, text: "Two runs. Well run between the wickets.", type: "double" },
            { runs: 3, text: "Three runs. Excellent running.", type: "triple" },
            { runs: 4, text: "FOUR! Boundary hit with authority.", type: "boundary" },
            { runs: 6, text: "SIX! Massive hit into the stands!", type: "six" },
            { runs: 0, text: "WICKET! Clean bowled!", type: "wicket" },
            { runs: 0, text: "WIDE ball. Extra run conceded.", type: "wide" },
            { runs: 0, text: "No ball. Free hit coming up.", type: "noball" },
            { runs: 1, text: "Leg bye. They scramble for a single.", type: "legbye" }
        ];

        const commentaryTemplates = {
            dot: ["Excellent delivery!", "Good fielding saves runs.", "Beaten outside off stump.", "Defended solidly."],
            single: ["Quick single taken.", "Well placed into the gap.", "Good running between wickets.", "Pushed to deep field for a single."],
            boundary: ["Classic cover drive!", "Pulled away with power!", "Lovely timing on that shot!", "That raced to the boundary!"],
            six: ["That's gone miles!", "Monstrous hit!", "What a shot! That's out of here!", "Deposited into the stands!"],
            wicket: ["Bowled him! Timber!", "Caught! That's a big wicket!", "LBW! The finger goes up!", "Edged and taken!"]
        };

        document.getElementById('startSimulation').addEventListener('click', function () {
            if (isSimulationRunning) return;

            isSimulationRunning = true;
            isPaused = false;
            document.getElementById('startSimulation').disabled = true;
            document.getElementById('pauseSimulation').disabled = false;
            document.getElementById('nextBall').disabled = true;
            document.getElementById('scoreDisplay').style.display = 'block';

            // Set match title based on format
            const format = document.getElementById('fantasyFormat').value;
            document.getElementById('matchTitle').textContent = `IND vs AUS - ${format} Match`;

            // Start automatic simulation
            const speed = parseInt(document.getElementById('simulationSpeed').value);

            // If speed is 0 (instant), run all balls at once
            if (speed === 0) {
                simulateAllBalls();
            } else {
                simulationInterval = setInterval(simulateBall, speed);
            }
        });

        document.getElementById('pauseSimulation').addEventListener('click', function () {
            if (!isSimulationRunning) return;

            if (isPaused) {
                // Resume simulation
                isPaused = false;
                this.innerHTML = '<i class="fas fa-play"></i> Resume';
                const speed = parseInt(document.getElementById('simulationSpeed').value);
                simulationInterval = setInterval(simulateBall, speed);
            } else {
                // Pause simulation
                isPaused = true;
                this.innerHTML = '<i class="fas fa-play"></i> Resume';
                clearInterval(simulationInterval);
            }
        });

        document.getElementById('nextBall').addEventListener('click', simulateBall);

        document.getElementById('resetSimulation').addEventListener('click', function () {
            clearInterval(simulationInterval);
            isSimulationRunning = false;
            isPaused = false;
            currentOver = 0;
            currentBall = 0;
            totalBalls = 0;
            totalRuns = 0;
            wickets = 0;
            partnershipRuns = 0;
            partnershipBalls = 0;
            currentBowlerRuns = 0;
            currentBowlerBalls = 0;
            currentBowlerWickets = 0;

            document.getElementById('startSimulation').disabled = false;
            document.getElementById('pauseSimulation').disabled = true;
            document.getElementById('nextBall').disabled = true;
            document.getElementById('currentScore').textContent = "0/0 (0.0)";
            document.getElementById('overProgressFill').style.width = "0%";
            document.getElementById('ballByBall').innerHTML = "";
            document.getElementById('commentary').textContent = "Match about to begin...";
            document.getElementById('batsman1').textContent = "R. Sharma: 0(0)";
            document.getElementById('batsman2').textContent = "V. Kohli: 0(0)";
            document.getElementById('bowler').textContent = "P. Cummins: 0-0-0-0";
            document.getElementById('requiredRunRate').textContent = "RR: 9.00";
            document.getElementById('partnership').textContent = "0 runs, 0 balls";
            document.getElementById('currentRunRate').textContent = "CRR: 0.00";
            document.getElementById('bowlerEconomy').textContent = "Econ: 0.00";
            document.getElementById('pauseSimulation').innerHTML = '<i class="fas fa-pause"></i> Pause';
        });

        function simulateAllBalls() {
            // Simulate all remaining balls instantly
            const remainingBalls = 120 - totalBalls;
            const remainingWickets = 10 - wickets;

            for (let i = 0; i < remainingBalls && i < remainingWickets * 10; i++) {
                simulateBall();
            }

            // Mark simulation as complete
            isSimulationRunning = false;
            document.getElementById('startSimulation').disabled = false;
            document.getElementById('pauseSimulation').disabled = true;
        }

        function simulateBall() {
            if (totalBalls >= 120 || wickets >= 10) {
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;

                if (totalRuns >= target) {
                    document.getElementById('commentary').textContent = "Team wins! Target achieved with " + (120 - totalBalls) + " balls remaining!";
                } else if (wickets >= 10) {
                    document.getElementById('commentary').textContent = "All out! Innings complete.";
                } else {
                    document.getElementById('commentary').textContent = "Innings complete! Final score: " + totalRuns + "/" + wickets;
                }
                return;
            }

            // Increment ball
            totalBalls++;
            currentBall++;
            partnershipBalls++;
            currentBowlerBalls++;

            if (currentBall > 6) {
                currentOver++;
                currentBall = 1;
                // Change bowler after over
                currentBowlerRuns = 0;
                currentBowlerBalls = 0;
                currentBowlerWickets = 0;
            }

            // AI Logic: Determine ball outcome with probability rules
            let outcomeIndex;
            const random = Math.random();

            // More probability for dot balls and singles, less for boundaries and wickets
            // Adjust probabilities based on match situation
            let dotProb = 0.25;
            let singleProb = 0.35;
            let boundaryProb = 0.20;
            let sixProb = 0.08;
            let wicketProb = 0.07;
            let extraProb = 0.05;

            // Adjust probabilities based on match situation
            const runRateRequired = (target - totalRuns) / (120 - totalBalls) * 6;
            const currentRunRate = totalBalls > 0 ? (totalRuns / totalBalls) * 6 : 0;

            if (runRateRequired > currentRunRate + 2) {
                // Need to accelerate - more attacking shots
                dotProb -= 0.05;
                boundaryProb += 0.05;
                sixProb += 0.03;
                wicketProb += 0.02;
            } else if (runRateRequired < currentRunRate - 2) {
                // Can afford to be conservative
                dotProb += 0.05;
                singleProb += 0.05;
                boundaryProb -= 0.05;
                sixProb -= 0.03;
                wicketProb -= 0.02;
            }

            // Determine outcome based on probabilities
            if (random < dotProb) outcomeIndex = 0;
            else if (random < dotProb + singleProb) outcomeIndex = 1;
            else if (random < dotProb + singleProb + 0.1) outcomeIndex = 2; // Double
            else if (random < dotProb + singleProb + 0.1 + 0.05) outcomeIndex = 3; // Triple
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb) outcomeIndex = 4;
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb + sixProb) outcomeIndex = 5;
            else if (random < dotProb + singleProb + 0.1 + 0.05 + boundaryProb + sixProb + wicketProb) outcomeIndex = 6;
            else outcomeIndex = 7; // Extras

            const outcome = ballOutcomes[outcomeIndex];

            // Update scores
            totalRuns += outcome.runs;
            partnershipRuns += outcome.runs;

            if (outcome.type === 'wicket') {
                wickets++;
                currentBowlerWickets++;
                partnershipRuns = 0;
                partnershipBalls = 0;
            }
            // Update bowler stats
            const bowlerOvers = Math.floor(currentBowlerBalls / 6);
            const bowlerBalls = currentBowlerBalls % 6;
            document.getElementById('bowler').textContent = `P. Cummins: ${bowlerOvers}-${bowlerBalls}-${currentBowlerRuns}-${currentBowlerWickets}`;

            // Update partnership
            document.getElementById('partnership').textContent = `${partnershipRuns} runs, ${partnershipBalls} balls`;

            // Calculate run rates
            const currentRR = totalBalls > 0 ? (totalRuns / totalBalls) * 6 : 0;
            const bowlerEcon = currentBowlerBalls > 0 ? (currentBowlerRuns / currentBowlerBalls) * 6 : 0;
            document.getElementById('currentRunRate').textContent = `CRR: ${currentRR.toFixed(2)}`;
            document.getElementById('bowlerEconomy').textContent = `Econ: ${bowlerEcon.toFixed(2)}`;

            // Update commentary with more variety
            const commentaryType = outcome.type;
            const commentaryOptions = commentaryTemplates[commentaryType] || [outcome.text];
            const randomCommentary = commentaryOptions[Math.floor(Math.random() * commentaryOptions.length)];

            document.getElementById('commentary').textContent = `${currentOver}.${currentBall}: ${randomCommentary}`;

            // Update ball-by-ball
            const ballEvent = document.createElement('div');
            ballEvent.className = 'ball-event';

            let ballResult = "";
            if (outcomeIndex === 6) {
                ballResult = "W";
            } else if (outcomeIndex === 7 || outcomeIndex === 8) {
                ballResult = outcomeIndex === 7 ? "Wd" : "Nb";
                if (outcome.runs > 0) ballResult += "+" + outcome.runs;
            } else {
                ballResult = outcome.runs.toString();
            }

            ballEvent.innerHTML = `
                <span>${currentOver}.${currentBall}</span>
                <span>${ballResult}</span>
                <span>${totalRuns}/${wickets}</span>
            `;

            // Add color based on outcome
            if (outcomeIndex === 6) {
                ballEvent.style.backgroundColor = 'rgba(230, 57, 70, 0.1)';
            } else if (outcome.runs >= 4) {
                ballEvent.style.backgroundColor = 'rgba(56, 176, 0, 0.1)';
            }

            document.getElementById('ballByBall').prepend(ballEvent);

            // Calculate required run rate
            const ballsRemaining = 120 - totalBalls;
            const runsNeeded = target - totalRuns;
            const requiredRR = ballsRemaining > 0 ? (runsNeeded / ballsRemaining * 6).toFixed(2) : 0;
            document.getElementById('requiredRunRate').textContent = `RR: ${requiredRR}`;

            // Check if innings is complete
            if (totalRuns >= target) {
                document.getElementById('commentary').textContent = "Team wins! Target achieved with " + ballsRemaining + " balls remaining!";
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            } else if (wickets >= 10) {
                document.getElementById('commentary').textContent = "All out! Innings complete.";
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            } else if (totalBalls >= 120) {
                document.getElementById('commentary').textContent = "Innings complete! Final score: " + totalRuns + "/" + wickets;
                clearInterval(simulationInterval);
                isSimulationRunning = false;
                document.getElementById('startSimulation').disabled = false;
                document.getElementById('pauseSimulation').disabled = true;
            }
        }



        // Smooth scrolling for navigation links
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');

                if (href && href.startsWith('#')) {
                    e.preventDefault();

                    // Remove active class from all links
                    document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));

                    // Add active class to clicked link
                    this.classList.add('active');

                    const target = document.querySelector(href);
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

        // Share prediction button
        document.getElementById('sharePredictionBtn').addEventListener('click', function () {
            const winner = document.getElementById('winner').textContent;
            const probability = document.getElementById('probability').textContent;

            const shareText = `CrickGenius predicts ${winner} to win with ${probability} probability! Try it at CrickGenius.com`;

            // Check if Web Share API is supported
            if (navigator.share) {
                navigator.share({
                    title: 'CrickGenius Match Prediction',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback: Copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Prediction copied to clipboard!');
                });
            }
        });

        // Detailed analysis button
        document.getElementById('detailedAnalysisBtn').addEventListener('click', function () {
            alert('Detailed analysis feature would show:\n\n- Team comparison by player positions\n- Head-to-head statistics\n- Pitch report analysis\n- Weather impact assessment\n- Player vs player matchups\n\nThis is a premium feature in the full version of CrickGenius!');
        });

        // Initialize the page
        window.onload = function () {
            // Initialize the chart with default data
            updateProbabilityChart("India", "Australia", 65, 35);

            // Trigger player analysis for default player
            document.getElementById('analyzeBtn').click();

            // Generate key factors for initial state
            generateKeyFactors("India", "Australia", 65, 35, "Hard", "Neutral", "T20", "Random");

            // Add scroll event to update active nav link
            window.addEventListener('scroll', function () {
                const sections = document.querySelectorAll('section[id]');
                const navLinks = document.querySelectorAll('nav a');

                let currentSection = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        currentSection = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + currentSection) {
                        link.classList.add('active');
                    }
                });
            });
        };

        loadCartCount();
    </script>
</body>

</html>
